ARM GAS  C:\Users\Sive\AppData\Local\Temp\cclRQGpc.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"chassis.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.file 1 "application/chassis/chassis.c"
  20              		.section	.text.MecanumCalculate,"ax",%progbits
  21              		.align	1
  22              		.syntax unified
  23              		.thumb
  24              		.thumb_func
  26              	MecanumCalculate:
  27              	.LFB168:
   1:application/chassis/chassis.c **** #include "chassis.h"
   2:application/chassis/chassis.c **** #include "robot_def.h"
   3:application/chassis/chassis.c **** #include "dji_motor.h"
   4:application/chassis/chassis.c **** #include "general_def.h"
   5:application/chassis/chassis.c **** #include "bsp_dwt.h"
   6:application/chassis/chassis.c **** #include "message_center.h"
   7:application/chassis/chassis.c **** #include "ins_task.h"
   8:application/chassis/chassis.c **** #include "arm_math.h"
   9:application/chassis/chassis.c **** /* Ê†πÊçÆrobot_def.h‰∏≠ÁöÑmacroËá™Âä®ËÆ°ÁÆóÁöÑÂèÇÊï∞ */
  10:application/chassis/chassis.c **** #define HALF_WHEEL_BASE (WHEEL_BASE / 2.0f)     // ÂçäËΩ¥Ë∑ù
  11:application/chassis/chassis.c **** #define HALF_TRACK_WIDTH (TRACK_WIDTH / 2.0f)   // ÂçäËΩÆË∑ù
  12:application/chassis/chassis.c **** #define PERIMETER_WHEEL (RADIUS_WHEEL * 2 * PI) // ËΩÆÂ≠êÂë®Èïø
  13:application/chassis/chassis.c **** 
  14:application/chassis/chassis.c **** /* ÁßÅÊúâÂáΩÊï∞ËÆ°ÁÆóÁöÑ‰∏≠‰ªãÂèòÈáè,ËÆæ‰∏∫ÈùôÊÄÅÈÅøÂÖçÂèÇÊï∞‰º†ÈÄíÁöÑÂºÄÈîÄ */
  15:application/chassis/chassis.c **** static float chassis_vx, chassis_vy;     // Â∞Ü‰∫ëÂè∞Á≥ªÁöÑÈÄüÂ∫¶ÊäïÂΩ±Âà∞Â∫ïÁõò
  16:application/chassis/chassis.c **** static float vt_lf, vt_rf, vt_lb, vt_rb; // Â∫ïÁõòÈÄüÂ∫¶Ëß£ÁÆóÂêéÁöÑ‰∏¥Êó∂ËæìÂá∫,ÂæÖËøõË°åÈôêÂπÖ
  17:application/chassis/chassis.c **** 
  18:application/chassis/chassis.c **** #ifdef ONE_BOARD
  19:application/chassis/chassis.c **** static Publisher_t *chassis_pub;                    // Áî®‰∫éÂèëÂ∏ÉÂ∫ïÁõòÁöÑÊï∞ÊçÆ
  20:application/chassis/chassis.c **** static Subscriber_t *chassis_sub;                   // Áî®‰∫éËÆ¢ÈòÖÂ∫ïÁõòÁöÑÊéßÂà∂ÂëΩ‰ª§
  21:application/chassis/chassis.c **** #endif                                              // !ONE_BOARD
  22:application/chassis/chassis.c **** static Chassis_Ctrl_Cmd_s chassis_cmd_recv;         // Â∫ïÁõòÊé•Êî∂Âà∞ÁöÑÊéßÂà∂ÂëΩ‰ª§
  23:application/chassis/chassis.c **** static Chassis_Upload_Data_s chassis_feedback_data; // Â∫ïÁõòÂõû‰º†ÁöÑÂèçÈ¶àÊï∞ÊçÆ
  24:application/chassis/chassis.c **** static PIDInstance chassis_angle_pid;                     // Â∫ïÁõòÁöÑPIDÊéßÂà∂Âô®
  25:application/chassis/chassis.c **** // static PIDInstance chassis_speed_pid;                      // Â∫ïÁõòÁöÑPIDÊéßÂà∂Âô®
  26:application/chassis/chassis.c **** 
  27:application/chassis/chassis.c **** static DJIMotorInstance *motor_lf, *motor_rf, *motor_lb, *motor_rb; // left right forward back
  28:application/chassis/chassis.c ****  
  29:application/chassis/chassis.c **** void ChassisInit()
  30:application/chassis/chassis.c **** {       //Â∫ïÁõòËßíÂ∫¶ÁéØpidÂàùÂßãÂåñ
  31:application/chassis/chassis.c ****         chassis_angle_pid.Kp=700;
ARM GAS  C:\Users\Sive\AppData\Local\Temp\cclRQGpc.s 			page 2


  32:application/chassis/chassis.c ****         chassis_angle_pid.Ki=0  ;   
  33:application/chassis/chassis.c ****         chassis_angle_pid.Kd=4;
  34:application/chassis/chassis.c ****         chassis_angle_pid.IntegralLimit = 10000;
  35:application/chassis/chassis.c ****         chassis_angle_pid.MaxOut = 30000;
  36:application/chassis/chassis.c ****     // Âõõ‰∏™ËΩÆÂ≠êÁöÑÂèÇÊï∞‰∏ÄÊ†∑,Êîπtx_idÂíåÂèçËΩ¨Ê†áÂøó‰ΩçÂç≥ÂèØ
  37:application/chassis/chassis.c ****     Motor_Init_Config_s chassis_motor_config = {
  38:application/chassis/chassis.c ****         .can_init_config.can_handle = &hcan1,
  39:application/chassis/chassis.c ****         .controller_param_init_config = {
  40:application/chassis/chassis.c ****             .speed_PID = {
  41:application/chassis/chassis.c ****                 .Kp = 10, // 4.5
  42:application/chassis/chassis.c ****                 .Ki = 0,  // 0
  43:application/chassis/chassis.c ****                 .Kd = 0,  // 0
  44:application/chassis/chassis.c ****                 .IntegralLimit = 3000,
  45:application/chassis/chassis.c ****                 .Improve = PID_Trapezoid_Intergral | PID_Integral_Limit | PID_Derivative_On_Measure
  46:application/chassis/chassis.c ****                 .MaxOut = 12000,
  47:application/chassis/chassis.c ****             },
  48:application/chassis/chassis.c ****             .current_PID = {
  49:application/chassis/chassis.c ****                 .Kp = 0.5, // 0.4
  50:application/chassis/chassis.c ****                 .Ki = 0,   // 0
  51:application/chassis/chassis.c ****                 .Kd = 0,
  52:application/chassis/chassis.c ****                 .IntegralLimit = 3000,
  53:application/chassis/chassis.c ****                 .Improve = PID_Trapezoid_Intergral | PID_Integral_Limit | PID_Derivative_On_Measure
  54:application/chassis/chassis.c ****                 .MaxOut = 15000,
  55:application/chassis/chassis.c ****             },
  56:application/chassis/chassis.c ****         },
  57:application/chassis/chassis.c ****         .controller_setting_init_config = {
  58:application/chassis/chassis.c ****             .angle_feedback_source = MOTOR_FEED,
  59:application/chassis/chassis.c ****             .speed_feedback_source = MOTOR_FEED,
  60:application/chassis/chassis.c ****             .outer_loop_type = SPEED_LOOP,
  61:application/chassis/chassis.c ****             .close_loop_type = SPEED_LOOP | CURRENT_LOOP,
  62:application/chassis/chassis.c ****         },
  63:application/chassis/chassis.c ****         .motor_type = M3508,
  64:application/chassis/chassis.c ****     };
  65:application/chassis/chassis.c ****     //  @todo: ÂΩìÂâçËøòÊ≤°ÊúâËÆæÁΩÆÁîµÊú∫ÁöÑÊ≠£ÂèçËΩ¨,‰ªçÁÑ∂ÈúÄË¶ÅÊâãÂä®Ê∑ªÂä†referenceÁöÑÊ≠£Ë¥üÂè
  66:application/chassis/chassis.c ****     chassis_motor_config.can_init_config.tx_id = 1;
  67:application/chassis/chassis.c ****     chassis_motor_config.controller_setting_init_config.motor_reverse_flag = MOTOR_DIRECTION_REVERS
  68:application/chassis/chassis.c ****     motor_lf = DJIMotorInit(&chassis_motor_config);
  69:application/chassis/chassis.c **** 
  70:application/chassis/chassis.c ****     chassis_motor_config.can_init_config.tx_id = 2;
  71:application/chassis/chassis.c ****     chassis_motor_config.controller_setting_init_config.motor_reverse_flag = MOTOR_DIRECTION_REVERS
  72:application/chassis/chassis.c ****     motor_rf = DJIMotorInit(&chassis_motor_config);
  73:application/chassis/chassis.c **** 
  74:application/chassis/chassis.c ****     chassis_motor_config.can_init_config.tx_id = 4;
  75:application/chassis/chassis.c ****     chassis_motor_config.controller_setting_init_config.motor_reverse_flag = MOTOR_DIRECTION_REVERS
  76:application/chassis/chassis.c ****     motor_lb = DJIMotorInit(&chassis_motor_config);
  77:application/chassis/chassis.c **** 
  78:application/chassis/chassis.c ****     chassis_motor_config.can_init_config.tx_id = 3;
  79:application/chassis/chassis.c ****     chassis_motor_config.controller_setting_init_config.motor_reverse_flag = MOTOR_DIRECTION_REVERS
  80:application/chassis/chassis.c ****     motor_rb = DJIMotorInit(&chassis_motor_config);
  81:application/chassis/chassis.c **** 
  82:application/chassis/chassis.c ****    
  83:application/chassis/chassis.c **** #ifdef CHASSIS_BOARD
  84:application/chassis/chassis.c ****     Chassis_IMU_data = INS_Init(); // Â∫ïÁõòIMUÂàùÂßãÂåñ
  85:application/chassis/chassis.c **** 
  86:application/chassis/chassis.c ****     CANComm_Init_Config_s comm_conf = {
  87:application/chassis/chassis.c ****         .can_config = {
  88:application/chassis/chassis.c ****             .can_handle = &hcan2,
ARM GAS  C:\Users\Sive\AppData\Local\Temp\cclRQGpc.s 			page 3


  89:application/chassis/chassis.c ****             .tx_id = 0x311, 
  90:application/chassis/chassis.c ****             .rx_id = 0x312,
  91:application/chassis/chassis.c ****         },
  92:application/chassis/chassis.c ****         .recv_data_len = sizeof(Chassis_Ctrl_Cmd_s),
  93:application/chassis/chassis.c ****         .send_data_len = sizeof(Chassis_Upload_Data_s),
  94:application/chassis/chassis.c ****     };
  95:application/chassis/chassis.c ****     chasiss_can_comm = CANCommInit(&comm_conf); // can commÂàùÂßãÂåñ
  96:application/chassis/chassis.c **** #endif                                          // CHASSIS_BOARD
  97:application/chassis/chassis.c **** 
  98:application/chassis/chassis.c **** #ifdef ONE_BOARD // ÂçïÊùøÊéßÂà∂Êï¥ËΩ¶,ÂàôÈÄöËøápubsubÊù•‰º†ÈÄíÊ∂àÊÅØ
  99:application/chassis/chassis.c ****     chassis_sub = SubRegister("chassis_cmd", sizeof(Chassis_Ctrl_Cmd_s));
 100:application/chassis/chassis.c ****     chassis_pub = PubRegister("chassis_feed", sizeof(Chassis_Upload_Data_s));
 101:application/chassis/chassis.c **** #endif // ONE_BOARD
 102:application/chassis/chassis.c **** }
 103:application/chassis/chassis.c **** #define LF_CENTER ((HALF_TRACK_WIDTH + CENTER_GIMBAL_OFFSET_X + HALF_WHEEL_BASE - CENTER_GIMBAL_OFF
 104:application/chassis/chassis.c **** #define RF_CENTER ((HALF_TRACK_WIDTH - CENTER_GIMBAL_OFFSET_X + HALF_WHEEL_BASE - CENTER_GIMBAL_OFF
 105:application/chassis/chassis.c **** #define LB_CENTER ((HALF_TRACK_WIDTH + CENTER_GIMBAL_OFFSET_X + HALF_WHEEL_BASE + CENTER_GIMBAL_OFF
 106:application/chassis/chassis.c **** #define RB_CENTER ((HALF_TRACK_WIDTH - CENTER_GIMBAL_OFFSET_X + HALF_WHEEL_BASE + CENTER_GIMBAL_OFF
 107:application/chassis/chassis.c **** /**
 108:application/chassis/chassis.c ****  * @brief ËÆ°ÁÆóÊØè‰∏™ËΩÆÊØÇÁîµÊú∫ÁöÑËæìÂá∫,Ê≠£ËøêÂä®Â≠¶Ëß£ÁÆó
 109:application/chassis/chassis.c ****  *        Áî®ÂÆèËøõË°åÈ¢ÑÊõøÊç¢ÂáèÂ∞èÂºÄÈîÄ,ËøêÂä®Ëß£ÁÆóÂÖ∑‰ΩìËøáÁ®ãÂèÇËÄÉÊïôÁ®ã
 110:application/chassis/chassis.c ****  */
 111:application/chassis/chassis.c **** static void MecanumCalculate()
 112:application/chassis/chassis.c **** {  
  28              		.loc 1 112 1 view -0
  29              		.cfi_startproc
  30              		@ args = 0, pretend = 0, frame = 0
  31              		@ frame_needed = 0, uses_anonymous_args = 0
  32              		@ link register save eliminated.
 113:application/chassis/chassis.c ****     // vt_lf = -chassis_vx - chassis_vy - chassis_cmd_recv.wz * LF_CENTER;
 114:application/chassis/chassis.c ****     // vt_rf = -chassis_vx + chassis_vy - chassis_cmd_recv.wz * RF_CENTER;
 115:application/chassis/chassis.c ****     // vt_lb = chassis_vx - chassis_vy - chassis_cmd_recv.wz * LB_CENTER;
 116:application/chassis/chassis.c ****     // vt_rb = chassis_vx + chassis_vy - chassis_cmd_recv.wz * RB_CENTER;
 117:application/chassis/chassis.c ****     vt_lf = -chassis_vx - chassis_vy - chassis_cmd_recv.wz  ;
  33              		.loc 1 117 5 view .LVU1
  34              		.loc 1 117 13 is_stmt 0 view .LVU2
  35 0000 134B     		ldr	r3, .L2
  36 0002 D3ED007A 		vldr.32	s15, [r3]
  37 0006 B1EE677A 		vneg.f32	s14, s15
  38              		.loc 1 117 25 view .LVU3
  39 000a 124B     		ldr	r3, .L2+4
  40 000c 93ED006A 		vldr.32	s12, [r3]
  41 0010 37EE467A 		vsub.f32	s14, s14, s12
  42              		.loc 1 117 56 view .LVU4
  43 0014 104B     		ldr	r3, .L2+8
  44 0016 D3ED026A 		vldr.32	s13, [r3, #8]
  45              		.loc 1 117 38 view .LVU5
  46 001a 37EE667A 		vsub.f32	s14, s14, s13
  47              		.loc 1 117 11 view .LVU6
  48 001e 0F4B     		ldr	r3, .L2+12
  49 0020 83ED007A 		vstr.32	s14, [r3]
 118:application/chassis/chassis.c ****     vt_rf = -chassis_vx + chassis_vy - chassis_cmd_recv.wz ;
  50              		.loc 1 118 5 is_stmt 1 view .LVU7
  51              		.loc 1 118 25 is_stmt 0 view .LVU8
  52 0024 36EE677A 		vsub.f32	s14, s12, s15
  53              		.loc 1 118 38 view .LVU9
  54 0028 37EE667A 		vsub.f32	s14, s14, s13
ARM GAS  C:\Users\Sive\AppData\Local\Temp\cclRQGpc.s 			page 4


  55              		.loc 1 118 11 view .LVU10
  56 002c 0C4B     		ldr	r3, .L2+16
  57 002e 83ED007A 		vstr.32	s14, [r3]
 119:application/chassis/chassis.c ****     vt_lb = chassis_vx - chassis_vy - chassis_cmd_recv.wz  ;
  58              		.loc 1 119 5 is_stmt 1 view .LVU11
  59              		.loc 1 119 24 is_stmt 0 view .LVU12
  60 0032 37EEC67A 		vsub.f32	s14, s15, s12
  61              		.loc 1 119 37 view .LVU13
  62 0036 37EE667A 		vsub.f32	s14, s14, s13
  63              		.loc 1 119 11 view .LVU14
  64 003a 0A4B     		ldr	r3, .L2+20
  65 003c 83ED007A 		vstr.32	s14, [r3]
 120:application/chassis/chassis.c ****     vt_rb = chassis_vx + chassis_vy - chassis_cmd_recv.wz ;
  66              		.loc 1 120 5 is_stmt 1 view .LVU15
  67              		.loc 1 120 24 is_stmt 0 view .LVU16
  68 0040 77EE867A 		vadd.f32	s15, s15, s12
  69              		.loc 1 120 37 view .LVU17
  70 0044 77EEE67A 		vsub.f32	s15, s15, s13
  71              		.loc 1 120 11 view .LVU18
  72 0048 074B     		ldr	r3, .L2+24
  73 004a C3ED007A 		vstr.32	s15, [r3]
 121:application/chassis/chassis.c **** }
  74              		.loc 1 121 1 view .LVU19
  75 004e 7047     		bx	lr
  76              	.L3:
  77              		.align	2
  78              	.L2:
  79 0050 00000000 		.word	chassis_vx
  80 0054 00000000 		.word	chassis_vy
  81 0058 00000000 		.word	chassis_cmd_recv
  82 005c 00000000 		.word	vt_lf
  83 0060 00000000 		.word	vt_rf
  84 0064 00000000 		.word	vt_lb
  85 0068 00000000 		.word	vt_rb
  86              		.cfi_endproc
  87              	.LFE168:
  89              		.section	.text.EstimateChassisAngle,"ax",%progbits
  90              		.align	1
  91              		.syntax unified
  92              		.thumb
  93              		.thumb_func
  95              	EstimateChassisAngle:
  96              	.LVL0:
  97              	.LFB170:
 122:application/chassis/chassis.c **** 
 123:application/chassis/chassis.c **** /**
 124:application/chassis/chassis.c ****  * @brief Ê†πÊçÆË£ÅÂà§Á≥ªÁªüÂíåÁîµÂÆπÂâ©‰ΩôÂÆπÈáèÂØπËæìÂá∫ËøõË°åÈôêÂà∂Âπ∂ËÆæÁΩÆÁîµÊú∫ÂèÇËÄÉÂÄº
 125:application/chassis/chassis.c ****  *
 126:application/chassis/chassis.c ****  */
 127:application/chassis/chassis.c **** static void LimitChassisOutput()
 128:application/chassis/chassis.c **** {
 129:application/chassis/chassis.c ****     // ÂäüÁéáÈôêÂà∂ÂæÖÊ∑ªÂä†
 130:application/chassis/chassis.c ****     // referee_data->PowerHeatData.chassis_power;
 131:application/chassis/chassis.c ****     // referee_data->PowerHeatData.chassis_power_buffer;
 132:application/chassis/chassis.c **** 
 133:application/chassis/chassis.c ****     // ÂÆåÊàêÂäüÁéáÈôêÂà∂ÂêéËøõË°åÁîµÊú∫ÂèÇËÄÉËæìÂÖ•ËÆæÂÆö
 134:application/chassis/chassis.c ****     DJIMotorSetRef(motor_lf, vt_lf);
ARM GAS  C:\Users\Sive\AppData\Local\Temp\cclRQGpc.s 			page 5


 135:application/chassis/chassis.c ****     DJIMotorSetRef(motor_rf, vt_rf);
 136:application/chassis/chassis.c ****     DJIMotorSetRef(motor_lb, vt_lb);
 137:application/chassis/chassis.c ****     DJIMotorSetRef(motor_rb, vt_rb);
 138:application/chassis/chassis.c **** }
 139:application/chassis/chassis.c **** 
 140:application/chassis/chassis.c **** 
 141:application/chassis/chassis.c **** /**
 142:application/chassis/chassis.c ****  * @brief ÂØπÊéßÂà∂ÁöÑÂ∫ïÁõòËßíÂ∫¶ËøõË°åÁªìÁÆó
 143:application/chassis/chassis.c ****  *          
 144:application/chassis/chassis.c ****  *
 145:application/chassis/chassis.c ****  */
 146:application/chassis/chassis.c **** 
 147:application/chassis/chassis.c **** static void EstimateChassisAngle(PIDInstance *chassis_angle_pid,float angle_measure,float angle_ref
  98              		.loc 1 147 101 is_stmt 1 view -0
  99              		.cfi_startproc
 100              		@ args = 0, pretend = 0, frame = 0
 101              		@ frame_needed = 0, uses_anonymous_args = 0
 102              		.loc 1 147 101 is_stmt 0 view .LVU21
 103 0000 08B5     		push	{r3, lr}
 104              		.cfi_def_cfa_offset 8
 105              		.cfi_offset 3, -8
 106              		.cfi_offset 14, -4
 148:application/chassis/chassis.c ****         chassis_cmd_recv.wz= -1*PIDCalculate(chassis_angle_pid, angle_measure, angle_ref);
 107              		.loc 1 148 9 is_stmt 1 view .LVU22
 108              		.loc 1 148 33 is_stmt 0 view .LVU23
 109 0002 FFF7FEFF 		bl	PIDCalculate
 110              	.LVL1:
 111              		.loc 1 148 32 discriminator 1 view .LVU24
 112 0006 B1EE400A 		vneg.f32	s0, s0
 113              		.loc 1 148 28 discriminator 1 view .LVU25
 114 000a 024B     		ldr	r3, .L6
 115 000c 83ED020A 		vstr.32	s0, [r3, #8]
 149:application/chassis/chassis.c **** }
 116              		.loc 1 149 1 view .LVU26
 117 0010 08BD     		pop	{r3, pc}
 118              	.L7:
 119 0012 00BF     		.align	2
 120              	.L6:
 121 0014 00000000 		.word	chassis_cmd_recv
 122              		.cfi_endproc
 123              	.LFE170:
 125              		.section	.text.LimitChassisOutput,"ax",%progbits
 126              		.align	1
 127              		.syntax unified
 128              		.thumb
 129              		.thumb_func
 131              	LimitChassisOutput:
 132              	.LFB169:
 128:application/chassis/chassis.c ****     // ÂäüÁéáÈôêÂà∂ÂæÖÊ∑ªÂä†
 133              		.loc 1 128 1 is_stmt 1 view -0
 134              		.cfi_startproc
 135              		@ args = 0, pretend = 0, frame = 0
 136              		@ frame_needed = 0, uses_anonymous_args = 0
 137 0000 08B5     		push	{r3, lr}
 138              		.cfi_def_cfa_offset 8
 139              		.cfi_offset 3, -8
 140              		.cfi_offset 14, -4
ARM GAS  C:\Users\Sive\AppData\Local\Temp\cclRQGpc.s 			page 6


 134:application/chassis/chassis.c ****     DJIMotorSetRef(motor_rf, vt_rf);
 141              		.loc 1 134 5 view .LVU28
 142 0002 0E4B     		ldr	r3, .L10
 143 0004 93ED000A 		vldr.32	s0, [r3]
 144 0008 0D4B     		ldr	r3, .L10+4
 145 000a 1868     		ldr	r0, [r3]
 146 000c FFF7FEFF 		bl	DJIMotorSetRef
 147              	.LVL2:
 135:application/chassis/chassis.c ****     DJIMotorSetRef(motor_lb, vt_lb);
 148              		.loc 1 135 5 view .LVU29
 149 0010 0C4B     		ldr	r3, .L10+8
 150 0012 93ED000A 		vldr.32	s0, [r3]
 151 0016 0C4B     		ldr	r3, .L10+12
 152 0018 1868     		ldr	r0, [r3]
 153 001a FFF7FEFF 		bl	DJIMotorSetRef
 154              	.LVL3:
 136:application/chassis/chassis.c ****     DJIMotorSetRef(motor_rb, vt_rb);
 155              		.loc 1 136 5 view .LVU30
 156 001e 0B4B     		ldr	r3, .L10+16
 157 0020 93ED000A 		vldr.32	s0, [r3]
 158 0024 0A4B     		ldr	r3, .L10+20
 159 0026 1868     		ldr	r0, [r3]
 160 0028 FFF7FEFF 		bl	DJIMotorSetRef
 161              	.LVL4:
 137:application/chassis/chassis.c **** }
 162              		.loc 1 137 5 view .LVU31
 163 002c 094B     		ldr	r3, .L10+24
 164 002e 93ED000A 		vldr.32	s0, [r3]
 165 0032 094B     		ldr	r3, .L10+28
 166 0034 1868     		ldr	r0, [r3]
 167 0036 FFF7FEFF 		bl	DJIMotorSetRef
 168              	.LVL5:
 138:application/chassis/chassis.c **** 
 169              		.loc 1 138 1 is_stmt 0 view .LVU32
 170 003a 08BD     		pop	{r3, pc}
 171              	.L11:
 172              		.align	2
 173              	.L10:
 174 003c 00000000 		.word	vt_lf
 175 0040 00000000 		.word	motor_lf
 176 0044 00000000 		.word	vt_rf
 177 0048 00000000 		.word	motor_rf
 178 004c 00000000 		.word	vt_lb
 179 0050 00000000 		.word	motor_lb
 180 0054 00000000 		.word	vt_rb
 181 0058 00000000 		.word	motor_rb
 182              		.cfi_endproc
 183              	.LFE169:
 185              		.section	.rodata.ChassisInit.str1.4,"aMS",%progbits,1
 186              		.align	2
 187              	.LC0:
 188 0000 63686173 		.ascii	"chassis_cmd\000"
 188      7369735F 
 188      636D6400 
 189              		.align	2
 190              	.LC1:
 191 000c 63686173 		.ascii	"chassis_feed\000"
ARM GAS  C:\Users\Sive\AppData\Local\Temp\cclRQGpc.s 			page 7


 191      7369735F 
 191      66656564 
 191      00
 192              		.section	.text.ChassisInit,"ax",%progbits
 193              		.align	1
 194              		.global	ChassisInit
 195              		.syntax unified
 196              		.thumb
 197              		.thumb_func
 199              	ChassisInit:
 200              	.LFB167:
  30:application/chassis/chassis.c ****         chassis_angle_pid.Kp=700;
 201              		.loc 1 30 1 is_stmt 1 view -0
 202              		.cfi_startproc
 203              		@ args = 0, pretend = 0, frame = 176
 204              		@ frame_needed = 0, uses_anonymous_args = 0
 205 0000 70B5     		push	{r4, r5, r6, lr}
 206              		.cfi_def_cfa_offset 16
 207              		.cfi_offset 4, -16
 208              		.cfi_offset 5, -12
 209              		.cfi_offset 6, -8
 210              		.cfi_offset 14, -4
 211 0002 ACB0     		sub	sp, sp, #176
 212              		.cfi_def_cfa_offset 192
  31:application/chassis/chassis.c ****         chassis_angle_pid.Ki=0  ;   
 213              		.loc 1 31 9 view .LVU34
  31:application/chassis/chassis.c ****         chassis_angle_pid.Ki=0  ;   
 214              		.loc 1 31 29 is_stmt 0 view .LVU35
 215 0004 2D4B     		ldr	r3, .L14
 216 0006 2E4A     		ldr	r2, .L14+4
 217 0008 1A60     		str	r2, [r3]	@ float
  32:application/chassis/chassis.c ****         chassis_angle_pid.Kd=4;
 218              		.loc 1 32 9 is_stmt 1 view .LVU36
  32:application/chassis/chassis.c ****         chassis_angle_pid.Kd=4;
 219              		.loc 1 32 29 is_stmt 0 view .LVU37
 220 000a 0022     		movs	r2, #0
 221 000c 5A60     		str	r2, [r3, #4]	@ float
  33:application/chassis/chassis.c ****         chassis_angle_pid.IntegralLimit = 10000;
 222              		.loc 1 33 9 is_stmt 1 view .LVU38
  33:application/chassis/chassis.c ****         chassis_angle_pid.IntegralLimit = 10000;
 223              		.loc 1 33 29 is_stmt 0 view .LVU39
 224 000e 4FF08142 		mov	r2, #1082130432
 225 0012 9A60     		str	r2, [r3, #8]	@ float
  34:application/chassis/chassis.c ****         chassis_angle_pid.MaxOut = 30000;
 226              		.loc 1 34 9 is_stmt 1 view .LVU40
  34:application/chassis/chassis.c ****         chassis_angle_pid.MaxOut = 30000;
 227              		.loc 1 34 41 is_stmt 0 view .LVU41
 228 0014 2B4A     		ldr	r2, .L14+8
 229 0016 9A61     		str	r2, [r3, #24]	@ float
  35:application/chassis/chassis.c ****     // Âõõ‰∏™ËΩÆÂ≠êÁöÑÂèÇÊï∞‰∏ÄÊ†∑,Êîπtx_idÂíåÂèçËΩ¨Ê†áÂøó‰ΩçÂç≥ÂèØ
 230              		.loc 1 35 9 is_stmt 1 view .LVU42
  35:application/chassis/chassis.c ****     // Âõõ‰∏™ËΩÆÂ≠êÁöÑÂèÇÊï∞‰∏ÄÊ†∑,Êîπtx_idÂíåÂèçËΩ¨Ê†áÂøó‰ΩçÂç≥ÂèØ
 231              		.loc 1 35 34 is_stmt 0 view .LVU43
 232 0018 2B4A     		ldr	r2, .L14+12
 233 001a DA60     		str	r2, [r3, #12]	@ float
  37:application/chassis/chassis.c ****         .can_init_config.can_handle = &hcan1,
 234              		.loc 1 37 5 is_stmt 1 view .LVU44
ARM GAS  C:\Users\Sive\AppData\Local\Temp\cclRQGpc.s 			page 8


  37:application/chassis/chassis.c ****         .can_init_config.can_handle = &hcan1,
 235              		.loc 1 37 25 is_stmt 0 view .LVU45
 236 001c B022     		movs	r2, #176
 237 001e 0021     		movs	r1, #0
 238 0020 6846     		mov	r0, sp
 239 0022 FFF7FEFF 		bl	memset
 240              	.LVL6:
 241 0026 4FF07C53 		mov	r3, #1056964608
 242 002a 0493     		str	r3, [sp, #16]	@ float
 243 002c 274B     		ldr	r3, .L14+16
 244 002e 0793     		str	r3, [sp, #28]	@ float
 245 0030 0722     		movs	r2, #7
 246 0032 8DF82420 		strb	r2, [sp, #36]
 247 0036 264B     		ldr	r3, .L14+20
 248 0038 0A93     		str	r3, [sp, #40]	@ float
 249 003a 2649     		ldr	r1, .L14+24
 250 003c 0F91     		str	r1, [sp, #60]	@ float
 251 003e 2649     		ldr	r1, .L14+28
 252 0040 1291     		str	r1, [sp, #72]	@ float
 253 0042 8DF85020 		strb	r2, [sp, #80]
 254 0046 1593     		str	r3, [sp, #84]	@ float
 255 0048 0225     		movs	r5, #2
 256 004a 8DF89450 		strb	r5, [sp, #148]
 257 004e 0326     		movs	r6, #3
 258 0050 8DF89560 		strb	r6, [sp, #149]
 259 0054 8DF89B50 		strb	r5, [sp, #155]
 260 0058 204B     		ldr	r3, .L14+32
 261 005a 2793     		str	r3, [sp, #156]
  66:application/chassis/chassis.c ****     chassis_motor_config.controller_setting_init_config.motor_reverse_flag = MOTOR_DIRECTION_REVERS
 262              		.loc 1 66 5 is_stmt 1 view .LVU46
  66:application/chassis/chassis.c ****     chassis_motor_config.controller_setting_init_config.motor_reverse_flag = MOTOR_DIRECTION_REVERS
 263              		.loc 1 66 48 is_stmt 0 view .LVU47
 264 005c 0124     		movs	r4, #1
 265 005e 2894     		str	r4, [sp, #160]
  67:application/chassis/chassis.c ****     motor_lf = DJIMotorInit(&chassis_motor_config);
 266              		.loc 1 67 5 is_stmt 1 view .LVU48
  67:application/chassis/chassis.c ****     motor_lf = DJIMotorInit(&chassis_motor_config);
 267              		.loc 1 67 76 is_stmt 0 view .LVU49
 268 0060 8DF89640 		strb	r4, [sp, #150]
  68:application/chassis/chassis.c **** 
 269              		.loc 1 68 5 is_stmt 1 view .LVU50
  68:application/chassis/chassis.c **** 
 270              		.loc 1 68 16 is_stmt 0 view .LVU51
 271 0064 6846     		mov	r0, sp
 272 0066 FFF7FEFF 		bl	DJIMotorInit
 273              	.LVL7:
  68:application/chassis/chassis.c **** 
 274              		.loc 1 68 14 discriminator 1 view .LVU52
 275 006a 1D4B     		ldr	r3, .L14+36
 276 006c 1860     		str	r0, [r3]
  70:application/chassis/chassis.c ****     chassis_motor_config.controller_setting_init_config.motor_reverse_flag = MOTOR_DIRECTION_REVERS
 277              		.loc 1 70 5 is_stmt 1 view .LVU53
  70:application/chassis/chassis.c ****     chassis_motor_config.controller_setting_init_config.motor_reverse_flag = MOTOR_DIRECTION_REVERS
 278              		.loc 1 70 48 is_stmt 0 view .LVU54
 279 006e 2895     		str	r5, [sp, #160]
  71:application/chassis/chassis.c ****     motor_rf = DJIMotorInit(&chassis_motor_config);
 280              		.loc 1 71 5 is_stmt 1 view .LVU55
ARM GAS  C:\Users\Sive\AppData\Local\Temp\cclRQGpc.s 			page 9


  71:application/chassis/chassis.c ****     motor_rf = DJIMotorInit(&chassis_motor_config);
 281              		.loc 1 71 76 is_stmt 0 view .LVU56
 282 0070 8DF89640 		strb	r4, [sp, #150]
  72:application/chassis/chassis.c **** 
 283              		.loc 1 72 5 is_stmt 1 view .LVU57
  72:application/chassis/chassis.c **** 
 284              		.loc 1 72 16 is_stmt 0 view .LVU58
 285 0074 6846     		mov	r0, sp
 286 0076 FFF7FEFF 		bl	DJIMotorInit
 287              	.LVL8:
  72:application/chassis/chassis.c **** 
 288              		.loc 1 72 14 discriminator 1 view .LVU59
 289 007a 1A4B     		ldr	r3, .L14+40
 290 007c 1860     		str	r0, [r3]
  74:application/chassis/chassis.c ****     chassis_motor_config.controller_setting_init_config.motor_reverse_flag = MOTOR_DIRECTION_REVERS
 291              		.loc 1 74 5 is_stmt 1 view .LVU60
  74:application/chassis/chassis.c ****     chassis_motor_config.controller_setting_init_config.motor_reverse_flag = MOTOR_DIRECTION_REVERS
 292              		.loc 1 74 48 is_stmt 0 view .LVU61
 293 007e 0423     		movs	r3, #4
 294 0080 2893     		str	r3, [sp, #160]
  75:application/chassis/chassis.c ****     motor_lb = DJIMotorInit(&chassis_motor_config);
 295              		.loc 1 75 5 is_stmt 1 view .LVU62
  75:application/chassis/chassis.c ****     motor_lb = DJIMotorInit(&chassis_motor_config);
 296              		.loc 1 75 76 is_stmt 0 view .LVU63
 297 0082 8DF89640 		strb	r4, [sp, #150]
  76:application/chassis/chassis.c **** 
 298              		.loc 1 76 5 is_stmt 1 view .LVU64
  76:application/chassis/chassis.c **** 
 299              		.loc 1 76 16 is_stmt 0 view .LVU65
 300 0086 6846     		mov	r0, sp
 301 0088 FFF7FEFF 		bl	DJIMotorInit
 302              	.LVL9:
  76:application/chassis/chassis.c **** 
 303              		.loc 1 76 14 discriminator 1 view .LVU66
 304 008c 164B     		ldr	r3, .L14+44
 305 008e 1860     		str	r0, [r3]
  78:application/chassis/chassis.c ****     chassis_motor_config.controller_setting_init_config.motor_reverse_flag = MOTOR_DIRECTION_REVERS
 306              		.loc 1 78 5 is_stmt 1 view .LVU67
  78:application/chassis/chassis.c ****     chassis_motor_config.controller_setting_init_config.motor_reverse_flag = MOTOR_DIRECTION_REVERS
 307              		.loc 1 78 48 is_stmt 0 view .LVU68
 308 0090 2896     		str	r6, [sp, #160]
  79:application/chassis/chassis.c ****     motor_rb = DJIMotorInit(&chassis_motor_config);
 309              		.loc 1 79 5 is_stmt 1 view .LVU69
  79:application/chassis/chassis.c ****     motor_rb = DJIMotorInit(&chassis_motor_config);
 310              		.loc 1 79 76 is_stmt 0 view .LVU70
 311 0092 8DF89640 		strb	r4, [sp, #150]
  80:application/chassis/chassis.c **** 
 312              		.loc 1 80 5 is_stmt 1 view .LVU71
  80:application/chassis/chassis.c **** 
 313              		.loc 1 80 16 is_stmt 0 view .LVU72
 314 0096 6846     		mov	r0, sp
 315 0098 FFF7FEFF 		bl	DJIMotorInit
 316              	.LVL10:
  80:application/chassis/chassis.c **** 
 317              		.loc 1 80 14 discriminator 1 view .LVU73
 318 009c 134B     		ldr	r3, .L14+48
 319 009e 1860     		str	r0, [r3]
ARM GAS  C:\Users\Sive\AppData\Local\Temp\cclRQGpc.s 			page 10


  99:application/chassis/chassis.c ****     chassis_pub = PubRegister("chassis_feed", sizeof(Chassis_Upload_Data_s));
 320              		.loc 1 99 5 is_stmt 1 view .LVU74
  99:application/chassis/chassis.c ****     chassis_pub = PubRegister("chassis_feed", sizeof(Chassis_Upload_Data_s));
 321              		.loc 1 99 19 is_stmt 0 view .LVU75
 322 00a0 1921     		movs	r1, #25
 323 00a2 1348     		ldr	r0, .L14+52
 324 00a4 FFF7FEFF 		bl	SubRegister
 325              	.LVL11:
  99:application/chassis/chassis.c ****     chassis_pub = PubRegister("chassis_feed", sizeof(Chassis_Upload_Data_s));
 326              		.loc 1 99 17 discriminator 1 view .LVU76
 327 00a8 124B     		ldr	r3, .L14+56
 328 00aa 1860     		str	r0, [r3]
 100:application/chassis/chassis.c **** #endif // ONE_BOARD
 329              		.loc 1 100 5 is_stmt 1 view .LVU77
 100:application/chassis/chassis.c **** #endif // ONE_BOARD
 330              		.loc 1 100 19 is_stmt 0 view .LVU78
 331 00ac 2146     		mov	r1, r4
 332 00ae 1248     		ldr	r0, .L14+60
 333 00b0 FFF7FEFF 		bl	PubRegister
 334              	.LVL12:
 100:application/chassis/chassis.c **** #endif // ONE_BOARD
 335              		.loc 1 100 17 discriminator 1 view .LVU79
 336 00b4 114B     		ldr	r3, .L14+64
 337 00b6 1860     		str	r0, [r3]
 102:application/chassis/chassis.c **** #define LF_CENTER ((HALF_TRACK_WIDTH + CENTER_GIMBAL_OFFSET_X + HALF_WHEEL_BASE - CENTER_GIMBAL_OFF
 338              		.loc 1 102 1 view .LVU80
 339 00b8 2CB0     		add	sp, sp, #176
 340              		.cfi_def_cfa_offset 16
 341              		@ sp needed
 342 00ba 70BD     		pop	{r4, r5, r6, pc}
 343              	.L15:
 344              		.align	2
 345              	.L14:
 346 00bc 00000000 		.word	chassis_angle_pid
 347 00c0 00002F44 		.word	1143930880
 348 00c4 00401C46 		.word	1176256512
 349 00c8 0060EA46 		.word	1189765120
 350 00cc 00606A46 		.word	1181376512
 351 00d0 00803B45 		.word	1161527296
 352 00d4 00002041 		.word	1092616192
 353 00d8 00803B46 		.word	1178304512
 354 00dc 00000000 		.word	hcan1
 355 00e0 00000000 		.word	motor_lf
 356 00e4 00000000 		.word	motor_rf
 357 00e8 00000000 		.word	motor_lb
 358 00ec 00000000 		.word	motor_rb
 359 00f0 00000000 		.word	.LC0
 360 00f4 00000000 		.word	chassis_sub
 361 00f8 0C000000 		.word	.LC1
 362 00fc 00000000 		.word	chassis_pub
 363              		.cfi_endproc
 364              	.LFE167:
 366              		.global	__aeabi_f2d
 367              		.global	__aeabi_dmul
 368              		.global	__aeabi_d2f
 369              		.section	.text.ChassisTask,"ax",%progbits
 370              		.align	1
ARM GAS  C:\Users\Sive\AppData\Local\Temp\cclRQGpc.s 			page 11


 371              		.global	ChassisTask
 372              		.syntax unified
 373              		.thumb
 374              		.thumb_func
 376              	ChassisTask:
 377              	.LFB172:
 150:application/chassis/chassis.c **** 
 151:application/chassis/chassis.c **** /**
 152:application/chassis/chassis.c ****  * @brief Ê†πÊçÆÊØè‰∏™ËΩÆÂ≠êÁöÑÈÄüÂ∫¶ÂèçÈ¶à,ËÆ°ÁÆóÂ∫ïÁõòÁöÑÂÆûÈôÖËøêÂä®ÈÄüÂ∫¶,ÈÄÜËøêÂä®Ëß£ÁÆó
 153:application/chassis/chassis.c ****  *        ÂØπ‰∫éÂèåÊùøÁöÑÊÉÖÂÜµ,ËÄÉËôëÂ¢ûÂä†Êù•Ëá™Â∫ïÁõòÊùøIMUÁöÑÊï∞ÊçÆ
 154:application/chassis/chassis.c ****  *
 155:application/chassis/chassis.c ****  */
 156:application/chassis/chassis.c **** static void EstimateSpeed()
 157:application/chassis/chassis.c ****     // Ê†πÊçÆÁîµÊú∫ÈÄüÂ∫¶ÂíåÈôÄËû∫‰ª™ÁöÑËßíÈÄüÂ∫¶ËøõË°åËß£ÁÆó,ËøòÂèØ‰ª•Âà©Áî®Âä†ÈÄüÂ∫¶ËÆ°Âà§Êñ≠ÊòØÂ
 158:application/chassis/chassis.c **** {
 159:application/chassis/chassis.c ****     // chassis_feedback_data.vx vy wz =
 160:application/chassis/chassis.c ****     //  ...
 161:application/chassis/chassis.c **** }
 162:application/chassis/chassis.c **** 
 163:application/chassis/chassis.c **** /* Êú∫Âô®‰∫∫Â∫ïÁõòÊéßÂà∂Ê†∏ÂøÉ‰ªªÂä° */
 164:application/chassis/chassis.c **** void ChassisTask()
 165:application/chassis/chassis.c **** {
 378              		.loc 1 165 1 is_stmt 1 view -0
 379              		.cfi_startproc
 380              		@ args = 0, pretend = 0, frame = 0
 381              		@ frame_needed = 0, uses_anonymous_args = 0
 382 0000 10B5     		push	{r4, lr}
 383              		.cfi_def_cfa_offset 8
 384              		.cfi_offset 4, -8
 385              		.cfi_offset 14, -4
 166:application/chassis/chassis.c ****     // ÂêéÁª≠Â¢ûÂä†Ê≤°Êî∂Âà∞Ê∂àÊÅØÁöÑÂ§ÑÁêÜ(ÂèåÊùøÁöÑÊÉÖÂÜµ)
 167:application/chassis/chassis.c ****     // Ëé∑ÂèñÊñ∞ÁöÑÊéßÂà∂‰ø°ÊÅØ
 168:application/chassis/chassis.c **** #ifdef ONE_BOARD
 169:application/chassis/chassis.c ****     SubGetMessage(chassis_sub, &chassis_cmd_recv);
 386              		.loc 1 169 5 view .LVU82
 387 0002 2F4C     		ldr	r4, .L20+8
 388 0004 2146     		mov	r1, r4
 389 0006 2F4B     		ldr	r3, .L20+12
 390 0008 1868     		ldr	r0, [r3]
 391 000a FFF7FEFF 		bl	SubGetMessage
 392              	.LVL13:
 170:application/chassis/chassis.c **** #endif   
 171:application/chassis/chassis.c **** #ifdef CHASSIS_BOARD
 172:application/chassis/chassis.c ****     chassis_cmd_recv = *(Chassis_Ctrl_Cmd_s *)CANCommGet(chasiss_can_comm);
 173:application/chassis/chassis.c **** #endif // CHASSIS_BOARD
 174:application/chassis/chassis.c **** 
 175:application/chassis/chassis.c ****     if (chassis_cmd_recv.chassis_mode == CHASSIS_ZERO_FORCE)
 393              		.loc 1 175 5 view .LVU83
 394              		.loc 1 175 25 is_stmt 0 view .LVU84
 395 000e 237D     		ldrb	r3, [r4, #20]	@ zero_extendqisi2
 396              		.loc 1 175 8 view .LVU85
 397 0010 002B     		cmp	r3, #0
 398 0012 3ED1     		bne	.L17
 176:application/chassis/chassis.c ****     { // Â¶ÇÊûúÂá∫Áé∞ÈáçË¶ÅÊ®°ÂùóÁ¶ªÁ∫øÊàñÈÅ•ÊéßÂô®ËÆæÁΩÆ‰∏∫ÊÄ•ÂÅú,ËÆ©ÁîµÊú∫ÂÅúÊ≠¢
 177:application/chassis/chassis.c ****         DJIMotorStop(motor_lf);
 399              		.loc 1 177 9 is_stmt 1 view .LVU86
 400 0014 2C4B     		ldr	r3, .L20+16
ARM GAS  C:\Users\Sive\AppData\Local\Temp\cclRQGpc.s 			page 12


 401 0016 1868     		ldr	r0, [r3]
 402 0018 FFF7FEFF 		bl	DJIMotorStop
 403              	.LVL14:
 178:application/chassis/chassis.c ****         DJIMotorStop(motor_rf);
 404              		.loc 1 178 9 view .LVU87
 405 001c 2B4B     		ldr	r3, .L20+20
 406 001e 1868     		ldr	r0, [r3]
 407 0020 FFF7FEFF 		bl	DJIMotorStop
 408              	.LVL15:
 179:application/chassis/chassis.c ****         DJIMotorStop(motor_lb);
 409              		.loc 1 179 9 view .LVU88
 410 0024 2A4B     		ldr	r3, .L20+24
 411 0026 1868     		ldr	r0, [r3]
 412 0028 FFF7FEFF 		bl	DJIMotorStop
 413              	.LVL16:
 180:application/chassis/chassis.c ****         DJIMotorStop(motor_rb);
 414              		.loc 1 180 9 view .LVU89
 415 002c 294B     		ldr	r3, .L20+28
 416 002e 1868     		ldr	r0, [r3]
 417 0030 FFF7FEFF 		bl	DJIMotorStop
 418              	.LVL17:
 419              	.L18:
 181:application/chassis/chassis.c ****     }
 182:application/chassis/chassis.c ****     else
 183:application/chassis/chassis.c ****     { // Ê≠£Â∏∏Â∑•‰Ωú
 184:application/chassis/chassis.c ****         DJIMotorEnable(motor_lf);
 185:application/chassis/chassis.c ****         DJIMotorEnable(motor_rf);
 186:application/chassis/chassis.c ****         DJIMotorEnable(motor_lb);
 187:application/chassis/chassis.c ****         DJIMotorEnable(motor_rb);
 188:application/chassis/chassis.c ****     }
 189:application/chassis/chassis.c **** 
 190:application/chassis/chassis.c ****     // Ê†πÊçÆÊéßÂà∂Ê®°ÂºèËÆæÂÆöÊóãËΩ¨ÈÄüÂ∫¶
 191:application/chassis/chassis.c ****     // switch (chassis_cmd_recv.chassis_mode)
 192:application/chassis/chassis.c ****     // {
 193:application/chassis/chassis.c ****     // case CHASSIS_NO_FOLLOW: // Â∫ïÁõò‰∏çÊóãËΩ¨,‰ΩÜÁª¥ÊåÅÂÖ®ÂêëÊú∫Âä®,‰∏ÄËà¨Áî®‰∫éË∞ÉÊï¥‰∫ëÂè∞Âßø
 194:application/chassis/chassis.c ****     //     chassis_cmd_recv.wz = 0;
 195:application/chassis/chassis.c ****     //     break;
 196:application/chassis/chassis.c ****     // case CHASSIS_FOLLOW_GIMBAL_YAW: // Ë∑üÈöè‰∫ëÂè∞,‰∏çÂçïÁã¨ËÆæÁΩÆpid,‰ª•ËØØÂ∑ÆËßíÂ∫¶Âπ≥Êñπ‰∏∫È
 197:application/chassis/chassis.c ****     //     chassis_cmd_recv.wz = -1.5f * chassis_cmd_recv.offset_angle * abs(chassis_cmd_recv.offse
 198:application/chassis/chassis.c ****     //     break;
 199:application/chassis/chassis.c ****     // case CHASSIS_ROTATE: // Ëá™Êóã,ÂêåÊó∂‰øùÊåÅÂÖ®ÂêëÊú∫Âä®;ÂΩìÂâçwzÁª¥ÊåÅÂÆöÂÄº,ÂêéÁª≠Â¢ûÂä†‰∏ç
 200:application/chassis/chassis.c ****     //     chassis_cmd_recv.wz = 4000;
 201:application/chassis/chassis.c ****     //     break;
 202:application/chassis/chassis.c ****     // default:
 203:application/chassis/chassis.c ****     //     break;
 204:application/chassis/chassis.c ****     // }
 205:application/chassis/chassis.c ****     // if((90-abs(INS.Yaw))>30){----Â∫ïÁõòËΩ¨90¬∞
 206:application/chassis/chassis.c **** 
 207:application/chassis/chassis.c ****     // }else
 208:application/chassis/chassis.c ****     // {intergal=intergal+(90-abs(INS.Yaw));}
 209:application/chassis/chassis.c ****     // chassis_cmd_recv.wz=(90-abs(INS.Yaw))*10+intergal*0.05;
 210:application/chassis/chassis.c ****     // chassis_cmd_recv.wz=PIDCalculate(&chassis_angle_pid, INS.Yaw,90);
 211:application/chassis/chassis.c ****     EstimateChassisAngle(&chassis_angle_pid,INS.total_angle,0.01*chassis_cmd_recv.wz);
 420              		.loc 1 211 5 view .LVU90
 421              		.loc 1 211 82 is_stmt 0 view .LVU91
 422 0034 224C     		ldr	r4, .L20+8
 423 0036 A068     		ldr	r0, [r4, #8]	@ float
ARM GAS  C:\Users\Sive\AppData\Local\Temp\cclRQGpc.s 			page 13


 424 0038 FFF7FEFF 		bl	__aeabi_f2d
 425              	.LVL18:
 426              		.loc 1 211 65 view .LVU92
 427 003c 1EA3     		adr	r3, .L20
 428 003e D3E90023 		ldrd	r2, [r3]
 429 0042 FFF7FEFF 		bl	__aeabi_dmul
 430              	.LVL19:
 431              		.loc 1 211 5 view .LVU93
 432 0046 FFF7FEFF 		bl	__aeabi_d2f
 433              	.LVL20:
 434 004a 00EE900A 		vmov	s1, r0
 435 004e 224B     		ldr	r3, .L20+32
 436 0050 93ED200A 		vldr.32	s0, [r3, #128]
 437 0054 2148     		ldr	r0, .L20+36
 438 0056 FFF7FEFF 		bl	EstimateChassisAngle
 439              	.LVL21:
 212:application/chassis/chassis.c ****     chassis_vx=3.0*chassis_cmd_recv.vy;
 440              		.loc 1 212 5 is_stmt 1 view .LVU94
 441              		.loc 1 212 36 is_stmt 0 view .LVU95
 442 005a D4ED017A 		vldr.32	s15, [r4, #4]
 443              		.loc 1 212 19 view .LVU96
 444 005e B0EE087A 		vmov.f32	s14, #3.0e+0
 445 0062 67EE877A 		vmul.f32	s15, s15, s14
 446              		.loc 1 212 15 view .LVU97
 447 0066 1E4B     		ldr	r3, .L20+40
 448 0068 C3ED007A 		vstr.32	s15, [r3]
 213:application/chassis/chassis.c ****     chassis_vy=-3.0*chassis_cmd_recv.vx;
 449              		.loc 1 213 5 is_stmt 1 view .LVU98
 450              		.loc 1 213 37 is_stmt 0 view .LVU99
 451 006c D4ED007A 		vldr.32	s15, [r4]
 452              		.loc 1 213 20 view .LVU100
 453 0070 B8EE087A 		vmov.f32	s14, #-3.0e+0
 454 0074 67EE877A 		vmul.f32	s15, s15, s14
 455              		.loc 1 213 15 view .LVU101
 456 0078 1A4B     		ldr	r3, .L20+44
 457 007a C3ED007A 		vstr.32	s15, [r3]
 214:application/chassis/chassis.c ****     // chassis_wz=chassis_cmd_recv.wz;
 215:application/chassis/chassis.c ****     //  chassis_cmd_recv.wz=0;
 216:application/chassis/chassis.c ****     // Ê†πÊçÆ‰∫ëÂè∞ÂíåÂ∫ïÁõòÁöÑËßíÂ∫¶offsetÂ∞ÜÊéßÂà∂ÈáèÊò†Â∞ÑÂà∞Â∫ïÁõòÂùêÊ†áÁ≥ª‰∏ä
 217:application/chassis/chassis.c ****     // Â∫ïÁõòÈÄÜÊó∂ÈíàÊóãËΩ¨‰∏∫ËßíÂ∫¶Ê≠£ÊñπÂêë;‰∫ëÂè∞ÂëΩ‰ª§ÁöÑÊñπÂêë‰ª•‰∫ëÂè∞ÊåáÂêëÁöÑÊñπÂêë‰∏∫x,Èá
 218:application/chassis/chassis.c ****     // static float sin_theta, cos_theta;
 219:application/chassis/chassis.c ****     // cos_theta = arm_cos_f32(chassis_cmd_recv.offset_angle * DEGREE_2_RAD);
 220:application/chassis/chassis.c ****     // sin_theta = arm_sin_f32(chassis_cmd_recv.offset_angle * DEGREE_2_RAD);
 221:application/chassis/chassis.c ****     // chassis_vx = chassis_cmd_recv.vx * cos_theta - chassis_cmd_recv.vy * sin_theta;
 222:application/chassis/chassis.c ****     // chassis_vy = chassis_cmd_recv.vx * sin_theta + chassis_cmd_recv.vy * cos_theta;
 223:application/chassis/chassis.c ****     
 224:application/chassis/chassis.c **** 
 225:application/chassis/chassis.c ****     // Ê†πÊçÆÊéßÂà∂Ê®°ÂºèËøõË°åÊ≠£ËøêÂä®Â≠¶Ëß£ÁÆó,ËÆ°ÁÆóÂ∫ïÁõòËæìÂá∫
 226:application/chassis/chassis.c ****     MecanumCalculate();
 458              		.loc 1 226 5 is_stmt 1 view .LVU102
 459 007e FFF7FEFF 		bl	MecanumCalculate
 460              	.LVL22:
 227:application/chassis/chassis.c **** 
 228:application/chassis/chassis.c ****     // Ê†πÊçÆË£ÅÂà§Á≥ªÁªüÁöÑÂèçÈ¶àÊï∞ÊçÆÂíåÁîµÂÆπÊï∞ÊçÆÂØπËæìÂá∫ÈôêÂπÖÂπ∂ËÆæÂÆöÈó≠ÁéØÂèÇËÄÉÂÄº
 229:application/chassis/chassis.c ****     LimitChassisOutput();
 461              		.loc 1 229 5 view .LVU103
 462 0082 FFF7FEFF 		bl	LimitChassisOutput
ARM GAS  C:\Users\Sive\AppData\Local\Temp\cclRQGpc.s 			page 14


 463              	.LVL23:
 230:application/chassis/chassis.c **** 
 231:application/chassis/chassis.c ****     // Ê†πÊçÆÁîµÊú∫ÁöÑÂèçÈ¶àÈÄüÂ∫¶ÂíåIMU(Â¶ÇÊûúÊúâ)ËÆ°ÁÆóÁúüÂÆûÈÄüÂ∫¶
 232:application/chassis/chassis.c ****     EstimateSpeed();
 464              		.loc 1 232 5 view .LVU104
 233:application/chassis/chassis.c **** 
 234:application/chassis/chassis.c ****     // // Ëé∑ÂèñË£ÅÂà§Á≥ªÁªüÊï∞ÊçÆ   Âª∫ËÆÆÂ∞ÜË£ÅÂà§Á≥ªÁªü‰∏éÂ∫ïÁõòÂàÜÁ¶ªÔºåÊâÄ‰ª•Ê≠§Â§ÑÊï∞ÊçÆÂ∫î‰Ω
 235:application/chassis/chassis.c ****     // // ÊàëÊñπÈ¢úËâ≤idÂ∞è‰∫é7ÊòØÁ∫¢Ëâ≤,Â§ß‰∫é7ÊòØËìùËâ≤,Ê≥®ÊÑèËøôÈáåÂèëÈÄÅÁöÑÊòØÂØπÊñπÁöÑÈ¢úËâ≤, 
 236:application/chassis/chassis.c ****     // chassis_feedback_data.enemy_color = referee_data->GameRobotState.robot_id > 7 ? 1 : 0;
 237:application/chassis/chassis.c ****     // // ÂΩìÂâçÂè™ÂÅö‰∫Ü17mmÁÉ≠ÈáèÁöÑÊï∞ÊçÆËé∑Âèñ,ÂêéÁª≠Ê†πÊçÆrobot_def‰∏≠ÁöÑÂÆèÂàáÊç¢ÂèåÊû™ÁÆ°Âíå
 238:application/chassis/chassis.c ****     // chassis_feedback_data.bullet_speed = referee_data->GameRobotState.shooter_id1_17mm_speed_lim
 239:application/chassis/chassis.c ****     // chassis_feedback_data.rest_heat = referee_data->PowerHeatData.shooter_heat0;
 240:application/chassis/chassis.c **** 
 241:application/chassis/chassis.c ****     // Êé®ÈÄÅÂèçÈ¶àÊ∂àÊÅØ
 242:application/chassis/chassis.c **** #ifdef ONE_BOARD
 243:application/chassis/chassis.c ****     PubPushMessage(chassis_pub, (void *)&chassis_feedback_data);
 465              		.loc 1 243 5 view .LVU105
 466 0086 1849     		ldr	r1, .L20+48
 467 0088 184B     		ldr	r3, .L20+52
 468 008a 1868     		ldr	r0, [r3]
 469 008c FFF7FEFF 		bl	PubPushMessage
 470              	.LVL24:
 244:application/chassis/chassis.c **** #endif
 245:application/chassis/chassis.c **** #ifdef CHASSIS_BOARD
 246:application/chassis/chassis.c ****     CANCommSend(chasiss_can_comm, (void *)&chassis_feedback_data);
 247:application/chassis/chassis.c **** #endif // CHASSIS_BOARD
 248:application/chassis/chassis.c **** }...
 471              		.loc 1 248 1 is_stmt 0 view .LVU106
 472 0090 10BD     		pop	{r4, pc}
 473              	.L17:
 184:application/chassis/chassis.c ****         DJIMotorEnable(motor_lf);
 474              		.loc 1 184 9 is_stmt 1 view .LVU107
 475 0092 0D4B     		ldr	r3, .L20+16
 476 0094 1868     		ldr	r0, [r3]
 477 0096 FFF7FEFF 		bl	DJIMotorEnable
 478              	.LVL25:
 185:application/chassis/chassis.c ****         DJIMotorEnable(motor_rf);
 479              		.loc 1 185 9 view .LVU108
 480 009a 0C4B     		ldr	r3, .L20+20
 481 009c 1868     		ldr	r0, [r3]
 482 009e FFF7FEFF 		bl	DJIMotorEnable
 483              	.LVL26:
 186:application/chassis/chassis.c ****         DJIMotorEnable(motor_lb);
 484              		.loc 1 186 9 view .LVU109
 485 00a2 0B4B     		ldr	r3, .L20+24
 486 00a4 1868     		ldr	r0, [r3]
 487 00a6 FFF7FEFF 		bl	DJIMotorEnable
 488              	.LVL27:
 187:application/chassis/chassis.c ****         DJIMotorEnable(motor_rb);
 489              		.loc 1 187 9 view .LVU110
 490 00aa 0A4B     		ldr	r3, .L20+28
 491 00ac 1868     		ldr	r0, [r3]
 492 00ae FFF7FEFF 		bl	DJIMotorEnable
 493              	.LVL28:
 494 00b2 BFE7     		b	.L18
 495              	.L21:
 496 00b4 AFF30080 		.align	3
ARM GAS  C:\Users\Sive\AppData\Local\Temp\cclRQGpc.s 			page 15


 497              	.L20:
 498 00b8 7B14AE47 		.word	1202590843
 499 00bc E17A843F 		.word	1065646817
 500 00c0 00000000 		.word	chassis_cmd_recv
 501 00c4 00000000 		.word	chassis_sub
 502 00c8 00000000 		.word	motor_lf
 503 00cc 00000000 		.word	motor_rf
 504 00d0 00000000 		.word	motor_lb
 505 00d4 00000000 		.word	motor_rb
 506 00d8 00000000 		.word	INS
 507 00dc 00000000 		.word	chassis_angle_pid
 508 00e0 00000000 		.word	chassis_vx
 509 00e4 00000000 		.word	chassis_vy
 510 00e8 00000000 		.word	chassis_feedback_data
 511 00ec 00000000 		.word	chassis_pub
 512              		.cfi_endproc
 513              	.LFE172:
 515              		.section	.bss.motor_rb,"aw",%nobits
 516              		.align	2
 519              	motor_rb:
 520 0000 00000000 		.space	4
 521              		.section	.bss.motor_lb,"aw",%nobits
 522              		.align	2
 525              	motor_lb:
 526 0000 00000000 		.space	4
 527              		.section	.bss.motor_rf,"aw",%nobits
 528              		.align	2
 531              	motor_rf:
 532 0000 00000000 		.space	4
 533              		.section	.bss.motor_lf,"aw",%nobits
 534              		.align	2
 537              	motor_lf:
 538 0000 00000000 		.space	4
 539              		.section	.bss.chassis_angle_pid,"aw",%nobits
 540              		.align	3
 543              	chassis_angle_pid:
 544 0000 00000000 		.space	120
 544      00000000 
 544      00000000 
 544      00000000 
 544      00000000 
 545              		.section	.bss.chassis_feedback_data,"aw",%nobits
 546              		.align	2
 549              	chassis_feedback_data:
 550 0000 00       		.space	1
 551              		.section	.bss.chassis_cmd_recv,"aw",%nobits
 552              		.align	2
 555              	chassis_cmd_recv:
 556 0000 00000000 		.space	25
 556      00000000 
 556      00000000 
 556      00000000 
 556      00000000 
 557              		.section	.bss.chassis_sub,"aw",%nobits
 558              		.align	2
 561              	chassis_sub:
 562 0000 00000000 		.space	4
ARM GAS  C:\Users\Sive\AppData\Local\Temp\cclRQGpc.s 			page 16


 563              		.section	.bss.chassis_pub,"aw",%nobits
 564              		.align	2
 567              	chassis_pub:
 568 0000 00000000 		.space	4
 569              		.section	.bss.vt_rb,"aw",%nobits
 570              		.align	2
 573              	vt_rb:
 574 0000 00000000 		.space	4
 575              		.section	.bss.vt_lb,"aw",%nobits
 576              		.align	2
 579              	vt_lb:
 580 0000 00000000 		.space	4
 581              		.section	.bss.vt_rf,"aw",%nobits
 582              		.align	2
 585              	vt_rf:
 586 0000 00000000 		.space	4
 587              		.section	.bss.vt_lf,"aw",%nobits
 588              		.align	2
 591              	vt_lf:
 592 0000 00000000 		.space	4
 593              		.section	.bss.chassis_vy,"aw",%nobits
 594              		.align	2
 597              	chassis_vy:
 598 0000 00000000 		.space	4
 599              		.section	.bss.chassis_vx,"aw",%nobits
 600              		.align	2
 603              	chassis_vx:
 604 0000 00000000 		.space	4
 605              		.text
 606              	.Letext0:
 607              		.file 2 "C:/Users/Sive/AppData/Roaming/Code/User/globalStorage/bmd.stm32-for-vscode/@xpack-dev-too
 608              		.file 3 "C:/Users/Sive/AppData/Roaming/Code/User/globalStorage/bmd.stm32-for-vscode/@xpack-dev-too
 609              		.file 4 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/stm32f407xx.h"
 610              		.file 5 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/stm32f4xx.h"
 611              		.file 6 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_can.h"
 612              		.file 7 "moudels/imu/INS_task.h"
 613              		.file 8 "application/robot_def.h"
 614              		.file 9 "bsp/can/bsp_can.h"
 615              		.file 10 "moudels/algorithm/controller.h"
 616              		.file 11 "moudels/motor/motor_def.h"
 617              		.file 12 "moudels/daemon/daemon.h"
 618              		.file 13 "moudels/motor/DJImotor/dji_motor.h"
 619              		.file 14 "moudels/message_center/message_center.h"
 620              		.file 15 "Core/Inc/can.h"
 621              		.file 16 "<built-in>"
ARM GAS  C:\Users\Sive\AppData\Local\Temp\cclRQGpc.s 			page 17


DEFINED SYMBOLS
                            *ABS*:00000000 chassis.c
C:\Users\Sive\AppData\Local\Temp\cclRQGpc.s:21     .text.MecanumCalculate:00000000 $t
C:\Users\Sive\AppData\Local\Temp\cclRQGpc.s:26     .text.MecanumCalculate:00000000 MecanumCalculate
C:\Users\Sive\AppData\Local\Temp\cclRQGpc.s:79     .text.MecanumCalculate:00000050 $d
C:\Users\Sive\AppData\Local\Temp\cclRQGpc.s:603    .bss.chassis_vx:00000000 chassis_vx
C:\Users\Sive\AppData\Local\Temp\cclRQGpc.s:597    .bss.chassis_vy:00000000 chassis_vy
C:\Users\Sive\AppData\Local\Temp\cclRQGpc.s:555    .bss.chassis_cmd_recv:00000000 chassis_cmd_recv
C:\Users\Sive\AppData\Local\Temp\cclRQGpc.s:591    .bss.vt_lf:00000000 vt_lf
C:\Users\Sive\AppData\Local\Temp\cclRQGpc.s:585    .bss.vt_rf:00000000 vt_rf
C:\Users\Sive\AppData\Local\Temp\cclRQGpc.s:579    .bss.vt_lb:00000000 vt_lb
C:\Users\Sive\AppData\Local\Temp\cclRQGpc.s:573    .bss.vt_rb:00000000 vt_rb
C:\Users\Sive\AppData\Local\Temp\cclRQGpc.s:90     .text.EstimateChassisAngle:00000000 $t
C:\Users\Sive\AppData\Local\Temp\cclRQGpc.s:95     .text.EstimateChassisAngle:00000000 EstimateChassisAngle
C:\Users\Sive\AppData\Local\Temp\cclRQGpc.s:121    .text.EstimateChassisAngle:00000014 $d
C:\Users\Sive\AppData\Local\Temp\cclRQGpc.s:126    .text.LimitChassisOutput:00000000 $t
C:\Users\Sive\AppData\Local\Temp\cclRQGpc.s:131    .text.LimitChassisOutput:00000000 LimitChassisOutput
C:\Users\Sive\AppData\Local\Temp\cclRQGpc.s:174    .text.LimitChassisOutput:0000003c $d
C:\Users\Sive\AppData\Local\Temp\cclRQGpc.s:537    .bss.motor_lf:00000000 motor_lf
C:\Users\Sive\AppData\Local\Temp\cclRQGpc.s:531    .bss.motor_rf:00000000 motor_rf
C:\Users\Sive\AppData\Local\Temp\cclRQGpc.s:525    .bss.motor_lb:00000000 motor_lb
C:\Users\Sive\AppData\Local\Temp\cclRQGpc.s:519    .bss.motor_rb:00000000 motor_rb
C:\Users\Sive\AppData\Local\Temp\cclRQGpc.s:186    .rodata.ChassisInit.str1.4:00000000 $d
C:\Users\Sive\AppData\Local\Temp\cclRQGpc.s:193    .text.ChassisInit:00000000 $t
C:\Users\Sive\AppData\Local\Temp\cclRQGpc.s:199    .text.ChassisInit:00000000 ChassisInit
C:\Users\Sive\AppData\Local\Temp\cclRQGpc.s:346    .text.ChassisInit:000000bc $d
C:\Users\Sive\AppData\Local\Temp\cclRQGpc.s:543    .bss.chassis_angle_pid:00000000 chassis_angle_pid
C:\Users\Sive\AppData\Local\Temp\cclRQGpc.s:561    .bss.chassis_sub:00000000 chassis_sub
C:\Users\Sive\AppData\Local\Temp\cclRQGpc.s:567    .bss.chassis_pub:00000000 chassis_pub
C:\Users\Sive\AppData\Local\Temp\cclRQGpc.s:370    .text.ChassisTask:00000000 $t
C:\Users\Sive\AppData\Local\Temp\cclRQGpc.s:376    .text.ChassisTask:00000000 ChassisTask
C:\Users\Sive\AppData\Local\Temp\cclRQGpc.s:498    .text.ChassisTask:000000b8 $d
C:\Users\Sive\AppData\Local\Temp\cclRQGpc.s:549    .bss.chassis_feedback_data:00000000 chassis_feedback_data
C:\Users\Sive\AppData\Local\Temp\cclRQGpc.s:516    .bss.motor_rb:00000000 $d
C:\Users\Sive\AppData\Local\Temp\cclRQGpc.s:522    .bss.motor_lb:00000000 $d
C:\Users\Sive\AppData\Local\Temp\cclRQGpc.s:528    .bss.motor_rf:00000000 $d
C:\Users\Sive\AppData\Local\Temp\cclRQGpc.s:534    .bss.motor_lf:00000000 $d
C:\Users\Sive\AppData\Local\Temp\cclRQGpc.s:540    .bss.chassis_angle_pid:00000000 $d
C:\Users\Sive\AppData\Local\Temp\cclRQGpc.s:546    .bss.chassis_feedback_data:00000000 $d
C:\Users\Sive\AppData\Local\Temp\cclRQGpc.s:552    .bss.chassis_cmd_recv:00000000 $d
C:\Users\Sive\AppData\Local\Temp\cclRQGpc.s:558    .bss.chassis_sub:00000000 $d
C:\Users\Sive\AppData\Local\Temp\cclRQGpc.s:564    .bss.chassis_pub:00000000 $d
C:\Users\Sive\AppData\Local\Temp\cclRQGpc.s:570    .bss.vt_rb:00000000 $d
C:\Users\Sive\AppData\Local\Temp\cclRQGpc.s:576    .bss.vt_lb:00000000 $d
C:\Users\Sive\AppData\Local\Temp\cclRQGpc.s:582    .bss.vt_rf:00000000 $d
C:\Users\Sive\AppData\Local\Temp\cclRQGpc.s:588    .bss.vt_lf:00000000 $d
C:\Users\Sive\AppData\Local\Temp\cclRQGpc.s:594    .bss.chassis_vy:00000000 $d
C:\Users\Sive\AppData\Local\Temp\cclRQGpc.s:600    .bss.chassis_vx:00000000 $d

UNDEFINED SYMBOLS
PIDCalculate
DJIMotorSetRef
memset
DJIMotorInit
SubRegister
PubRegister
hcan1
ARM GAS  C:\Users\Sive\AppData\Local\Temp\cclRQGpc.s 			page 18


__aeabi_f2d
__aeabi_dmul
__aeabi_d2f
SubGetMessage
DJIMotorStop
PubPushMessage
DJIMotorEnable
INS
