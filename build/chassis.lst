ARM GAS  C:\Users\Sive\AppData\Local\Temp\ccRSDs8v.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"chassis.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.file 1 "application/chassis/chassis.c"
  20              		.section	.text.MecanumCalculate,"ax",%progbits
  21              		.align	1
  22              		.syntax unified
  23              		.thumb
  24              		.thumb_func
  26              	MecanumCalculate:
  27              	.LFB168:
   1:application/chassis/chassis.c ****        #include "chassis.h"
   2:application/chassis/chassis.c **** #include "robot_def.h"
   3:application/chassis/chassis.c **** #include "dji_motor.h"
   4:application/chassis/chassis.c **** #include "general_def.h"
   5:application/chassis/chassis.c **** #include "bsp_dwt.h"
   6:application/chassis/chassis.c **** #include "message_center.h"
   7:application/chassis/chassis.c **** #include "ins_task.h"
   8:application/chassis/chassis.c **** #include "arm_math.h"
   9:application/chassis/chassis.c **** /* Ê†πÊçÆrobot_def.h‰∏≠ÁöÑmacroËá™Âä®ËÆ°ÁÆóÁöÑÂèÇÊï∞ */
  10:application/chassis/chassis.c **** #define HALF_WHEEL_BASE (WHEEL_BASE / 2.0f)     // ÂçäËΩ¥Ë∑ù
  11:application/chassis/chassis.c **** #define HALF_TRACK_WIDTH (TRACK_WIDTH / 2.0f)   // ÂçäËΩÆË∑ù
  12:application/chassis/chassis.c **** #define PERIMETER_WHEEL (RADIUS_WHEEL * 2 * PI) // ËΩÆÂ≠êÂë®Èïø
  13:application/chassis/chassis.c **** 
  14:application/chassis/chassis.c **** /* ÁßÅÊúâÂáΩÊï∞ËÆ°ÁÆóÁöÑ‰∏≠‰ªãÂèòÈáè,ËÆæ‰∏∫ÈùôÊÄÅÈÅøÂÖçÂèÇÊï∞‰º†ÈÄíÁöÑÂºÄÈîÄ */
  15:application/chassis/chassis.c **** static float chassis_vx, chassis_vy;     // Â∞Ü‰∫ëÂè∞Á≥ªÁöÑÈÄüÂ∫¶ÊäïÂΩ±Âà∞Â∫ïÁõò
  16:application/chassis/chassis.c **** static float vt_lf, vt_rf, vt_lb, vt_rb; // Â∫ïÁõòÈÄüÂ∫¶Ëß£ÁÆóÂêéÁöÑ‰∏¥Êó∂ËæìÂá∫,ÂæÖËøõË°åÈôêÂπÖ
  17:application/chassis/chassis.c **** 
  18:application/chassis/chassis.c **** #ifdef ONE_BOARD
  19:application/chassis/chassis.c **** static Publisher_t *chassis_pub;                    // Áî®‰∫éÂèëÂ∏ÉÂ∫ïÁõòÁöÑÊï∞ÊçÆ
  20:application/chassis/chassis.c **** static Subscriber_t *chassis_sub;                   // Áî®‰∫éËÆ¢ÈòÖÂ∫ïÁõòÁöÑÊéßÂà∂ÂëΩ‰ª§
  21:application/chassis/chassis.c **** #endif                                              // !ONE_BOARD
  22:application/chassis/chassis.c **** static Chassis_Ctrl_Cmd_s chassis_cmd_recv;         // Â∫ïÁõòÊé•Êî∂Âà∞ÁöÑÊéßÂà∂ÂëΩ‰ª§
  23:application/chassis/chassis.c **** static Chassis_Upload_Data_s chassis_feedback_data; // Â∫ïÁõòÂõû‰º†ÁöÑÂèçÈ¶àÊï∞ÊçÆ
  24:application/chassis/chassis.c **** static PIDInstance chassis_angle_pid;                     // Â∫ïÁõòÁöÑPIDÊéßÂà∂Âô®
  25:application/chassis/chassis.c **** // static PIDInstance chassis_speed_pid;                      // Â∫ïÁõòÁöÑPIDÊéßÂà∂Âô®
  26:application/chassis/chassis.c **** 
  27:application/chassis/chassis.c **** static DJIMotorInstance *motor_lf, *motor_rf, *motor_lb, *motor_rb; // left right forward back
  28:application/chassis/chassis.c ****  
  29:application/chassis/chassis.c **** void ChassisInit()
  30:application/chassis/chassis.c **** {       
  31:application/chassis/chassis.c ****         chassis_angle_pid.Kp=0.1;
ARM GAS  C:\Users\Sive\AppData\Local\Temp\ccRSDs8v.s 			page 2


  32:application/chassis/chassis.c ****         chassis_angle_pid.Ki=0.01;   
  33:application/chassis/chassis.c ****         chassis_angle_pid.Kd=0.05;
  34:application/chassis/chassis.c ****         // static PIDInstance 
  35:application/chassis/chassis.c ****     // Âõõ‰∏™ËΩÆÂ≠êÁöÑÂèÇÊï∞‰∏ÄÊ†∑,Êîπtx_idÂíåÂèçËΩ¨Ê†áÂøó‰ΩçÂç≥ÂèØ
  36:application/chassis/chassis.c ****     Motor_Init_Config_s chassis_motor_config = {
  37:application/chassis/chassis.c ****         .can_init_config.can_handle = &hcan1,
  38:application/chassis/chassis.c ****         .controller_param_init_config = {
  39:application/chassis/chassis.c ****             .speed_PID = {
  40:application/chassis/chassis.c ****                 .Kp = 10, // 4.5
  41:application/chassis/chassis.c ****                 .Ki = 0,  // 0
  42:application/chassis/chassis.c ****                 .Kd = 0,  // 0
  43:application/chassis/chassis.c ****                 .IntegralLimit = 3000,
  44:application/chassis/chassis.c ****                 .Improve = PID_Trapezoid_Intergral | PID_Integral_Limit | PID_Derivative_On_Measure
  45:application/chassis/chassis.c ****                 .MaxOut = 12000,
  46:application/chassis/chassis.c ****             },
  47:application/chassis/chassis.c ****             .current_PID = {
  48:application/chassis/chassis.c ****                 .Kp = 0.5, // 0.4
  49:application/chassis/chassis.c ****                 .Ki = 0,   // 0
  50:application/chassis/chassis.c ****                 .Kd = 0,
  51:application/chassis/chassis.c ****                 .IntegralLimit = 3000,
  52:application/chassis/chassis.c ****                 .Improve = PID_Trapezoid_Intergral | PID_Integral_Limit | PID_Derivative_On_Measure
  53:application/chassis/chassis.c ****                 .MaxOut = 15000,
  54:application/chassis/chassis.c ****             },
  55:application/chassis/chassis.c ****         },
  56:application/chassis/chassis.c ****         .controller_setting_init_config = {
  57:application/chassis/chassis.c ****             .angle_feedback_source = MOTOR_FEED,
  58:application/chassis/chassis.c ****             .speed_feedback_source = MOTOR_FEED,
  59:application/chassis/chassis.c ****             .outer_loop_type = SPEED_LOOP,
  60:application/chassis/chassis.c ****             .close_loop_type = SPEED_LOOP | CURRENT_LOOP,
  61:application/chassis/chassis.c ****         },
  62:application/chassis/chassis.c ****         .motor_type = M3508,
  63:application/chassis/chassis.c ****     };
  64:application/chassis/chassis.c ****     //  @todo: ÂΩìÂâçËøòÊ≤°ÊúâËÆæÁΩÆÁîµÊú∫ÁöÑÊ≠£ÂèçËΩ¨,‰ªçÁÑ∂ÈúÄË¶ÅÊâãÂä®Ê∑ªÂä†referenceÁöÑÊ≠£Ë¥üÂè
  65:application/chassis/chassis.c ****     chassis_motor_config.can_init_config.tx_id = 1;
  66:application/chassis/chassis.c ****     chassis_motor_config.controller_setting_init_config.motor_reverse_flag = MOTOR_DIRECTION_REVERS
  67:application/chassis/chassis.c ****     motor_lf = DJIMotorInit(&chassis_motor_config);
  68:application/chassis/chassis.c **** 
  69:application/chassis/chassis.c ****     chassis_motor_config.can_init_config.tx_id = 2;
  70:application/chassis/chassis.c ****     chassis_motor_config.controller_setting_init_config.motor_reverse_flag = MOTOR_DIRECTION_REVERS
  71:application/chassis/chassis.c ****     motor_rf = DJIMotorInit(&chassis_motor_config);
  72:application/chassis/chassis.c **** 
  73:application/chassis/chassis.c ****     chassis_motor_config.can_init_config.tx_id = 4;
  74:application/chassis/chassis.c ****     chassis_motor_config.controller_setting_init_config.motor_reverse_flag = MOTOR_DIRECTION_REVERS
  75:application/chassis/chassis.c ****     motor_lb = DJIMotorInit(&chassis_motor_config);
  76:application/chassis/chassis.c **** 
  77:application/chassis/chassis.c ****     chassis_motor_config.can_init_config.tx_id = 3;
  78:application/chassis/chassis.c ****     chassis_motor_config.controller_setting_init_config.motor_reverse_flag = MOTOR_DIRECTION_REVERS
  79:application/chassis/chassis.c ****     motor_rb = DJIMotorInit(&chassis_motor_config);
  80:application/chassis/chassis.c **** 
  81:application/chassis/chassis.c ****    
  82:application/chassis/chassis.c **** #ifdef CHASSIS_BOARD
  83:application/chassis/chassis.c ****     Chassis_IMU_data = INS_Init(); // Â∫ïÁõòIMUÂàùÂßãÂåñ
  84:application/chassis/chassis.c **** 
  85:application/chassis/chassis.c ****     CANComm_Init_Config_s comm_conf = {
  86:application/chassis/chassis.c ****         .can_config = {
  87:application/chassis/chassis.c ****             .can_handle = &hcan2,
  88:application/chassis/chassis.c ****             .tx_id = 0x311, 
ARM GAS  C:\Users\Sive\AppData\Local\Temp\ccRSDs8v.s 			page 3


  89:application/chassis/chassis.c ****             .rx_id = 0x312,
  90:application/chassis/chassis.c ****         },
  91:application/chassis/chassis.c ****         .recv_data_len = sizeof(Chassis_Ctrl_Cmd_s),
  92:application/chassis/chassis.c ****         .send_data_len = sizeof(Chassis_Upload_Data_s),
  93:application/chassis/chassis.c ****     };
  94:application/chassis/chassis.c ****     chasiss_can_comm = CANCommInit(&comm_conf); // can commÂàùÂßãÂåñ
  95:application/chassis/chassis.c **** #endif                                          // CHASSIS_BOARD
  96:application/chassis/chassis.c **** 
  97:application/chassis/chassis.c **** #ifdef ONE_BOARD // ÂçïÊùøÊéßÂà∂Êï¥ËΩ¶,ÂàôÈÄöËøápubsubÊù•‰º†ÈÄíÊ∂àÊÅØ
  98:application/chassis/chassis.c ****     chassis_sub = SubRegister("chassis_cmd", sizeof(Chassis_Ctrl_Cmd_s));
  99:application/chassis/chassis.c ****     chassis_pub = PubRegister("chassis_feed", sizeof(Chassis_Upload_Data_s));
 100:application/chassis/chassis.c **** #endif // ONE_BOARD
 101:application/chassis/chassis.c **** }
 102:application/chassis/chassis.c **** #define LF_CENTER ((HALF_TRACK_WIDTH + CENTER_GIMBAL_OFFSET_X + HALF_WHEEL_BASE - CENTER_GIMBAL_OFF
 103:application/chassis/chassis.c **** #define RF_CENTER ((HALF_TRACK_WIDTH - CENTER_GIMBAL_OFFSET_X + HALF_WHEEL_BASE - CENTER_GIMBAL_OFF
 104:application/chassis/chassis.c **** #define LB_CENTER ((HALF_TRACK_WIDTH + CENTER_GIMBAL_OFFSET_X + HALF_WHEEL_BASE + CENTER_GIMBAL_OFF
 105:application/chassis/chassis.c **** #define RB_CENTER ((HALF_TRACK_WIDTH - CENTER_GIMBAL_OFFSET_X + HALF_WHEEL_BASE + CENTER_GIMBAL_OFF
 106:application/chassis/chassis.c **** /**
 107:application/chassis/chassis.c ****  * @brief ËÆ°ÁÆóÊØè‰∏™ËΩÆÊØÇÁîµÊú∫ÁöÑËæìÂá∫,Ê≠£ËøêÂä®Â≠¶Ëß£ÁÆó
 108:application/chassis/chassis.c ****  *        Áî®ÂÆèËøõË°åÈ¢ÑÊõøÊç¢ÂáèÂ∞èÂºÄÈîÄ,ËøêÂä®Ëß£ÁÆóÂÖ∑‰ΩìËøáÁ®ãÂèÇËÄÉÊïôÁ®ã
 109:application/chassis/chassis.c ****  */
 110:application/chassis/chassis.c **** static void MecanumCalculate()
 111:application/chassis/chassis.c **** {  
  28              		.loc 1 111 1 view -0
  29              		.cfi_startproc
  30              		@ args = 0, pretend = 0, frame = 0
  31              		@ frame_needed = 0, uses_anonymous_args = 0
  32              		@ link register save eliminated.
 112:application/chassis/chassis.c ****     // vt_lf = -chassis_vx - chassis_vy - chassis_cmd_recv.wz * LF_CENTER;
 113:application/chassis/chassis.c ****     // vt_rf = -chassis_vx + chassis_vy - chassis_cmd_recv.wz * RF_CENTER;
 114:application/chassis/chassis.c ****     // vt_lb = chassis_vx - chassis_vy - chassis_cmd_recv.wz * LB_CENTER;
 115:application/chassis/chassis.c ****     // vt_rb = chassis_vx + chassis_vy - chassis_cmd_recv.wz * RB_CENTER;
 116:application/chassis/chassis.c ****     vt_lf = -chassis_vx - chassis_vy - chassis_cmd_recv.wz  ;
  33              		.loc 1 116 5 view .LVU1
  34              		.loc 1 116 13 is_stmt 0 view .LVU2
  35 0000 134B     		ldr	r3, .L2
  36 0002 D3ED007A 		vldr.32	s15, [r3]
  37 0006 B1EE677A 		vneg.f32	s14, s15
  38              		.loc 1 116 25 view .LVU3
  39 000a 124B     		ldr	r3, .L2+4
  40 000c 93ED006A 		vldr.32	s12, [r3]
  41 0010 37EE467A 		vsub.f32	s14, s14, s12
  42              		.loc 1 116 56 view .LVU4
  43 0014 104B     		ldr	r3, .L2+8
  44 0016 D3ED026A 		vldr.32	s13, [r3, #8]
  45              		.loc 1 116 38 view .LVU5
  46 001a 37EE667A 		vsub.f32	s14, s14, s13
  47              		.loc 1 116 11 view .LVU6
  48 001e 0F4B     		ldr	r3, .L2+12
  49 0020 83ED007A 		vstr.32	s14, [r3]
 117:application/chassis/chassis.c ****     vt_rf = -chassis_vx + chassis_vy - chassis_cmd_recv.wz ;
  50              		.loc 1 117 5 is_stmt 1 view .LVU7
  51              		.loc 1 117 25 is_stmt 0 view .LVU8
  52 0024 36EE677A 		vsub.f32	s14, s12, s15
  53              		.loc 1 117 38 view .LVU9
  54 0028 37EE667A 		vsub.f32	s14, s14, s13
  55              		.loc 1 117 11 view .LVU10
ARM GAS  C:\Users\Sive\AppData\Local\Temp\ccRSDs8v.s 			page 4


  56 002c 0C4B     		ldr	r3, .L2+16
  57 002e 83ED007A 		vstr.32	s14, [r3]
 118:application/chassis/chassis.c ****     vt_lb = chassis_vx - chassis_vy - chassis_cmd_recv.wz  ;
  58              		.loc 1 118 5 is_stmt 1 view .LVU11
  59              		.loc 1 118 24 is_stmt 0 view .LVU12
  60 0032 37EEC67A 		vsub.f32	s14, s15, s12
  61              		.loc 1 118 37 view .LVU13
  62 0036 37EE667A 		vsub.f32	s14, s14, s13
  63              		.loc 1 118 11 view .LVU14
  64 003a 0A4B     		ldr	r3, .L2+20
  65 003c 83ED007A 		vstr.32	s14, [r3]
 119:application/chassis/chassis.c ****     vt_rb = chassis_vx + chassis_vy - chassis_cmd_recv.wz ;
  66              		.loc 1 119 5 is_stmt 1 view .LVU15
  67              		.loc 1 119 24 is_stmt 0 view .LVU16
  68 0040 77EE867A 		vadd.f32	s15, s15, s12
  69              		.loc 1 119 37 view .LVU17
  70 0044 77EEE67A 		vsub.f32	s15, s15, s13
  71              		.loc 1 119 11 view .LVU18
  72 0048 074B     		ldr	r3, .L2+24
  73 004a C3ED007A 		vstr.32	s15, [r3]
 120:application/chassis/chassis.c **** }
  74              		.loc 1 120 1 view .LVU19
  75 004e 7047     		bx	lr
  76              	.L3:
  77              		.align	2
  78              	.L2:
  79 0050 00000000 		.word	chassis_vx
  80 0054 00000000 		.word	chassis_vy
  81 0058 00000000 		.word	chassis_cmd_recv
  82 005c 00000000 		.word	vt_lf
  83 0060 00000000 		.word	vt_rf
  84 0064 00000000 		.word	vt_lb
  85 0068 00000000 		.word	vt_rb
  86              		.cfi_endproc
  87              	.LFE168:
  89              		.section	.text.LimitChassisOutput,"ax",%progbits
  90              		.align	1
  91              		.syntax unified
  92              		.thumb
  93              		.thumb_func
  95              	LimitChassisOutput:
  96              	.LFB169:
 121:application/chassis/chassis.c **** 
 122:application/chassis/chassis.c **** /**
 123:application/chassis/chassis.c ****  * @brief Ê†πÊçÆË£ÅÂà§Á≥ªÁªüÂíåÁîµÂÆπÂâ©‰ΩôÂÆπÈáèÂØπËæìÂá∫ËøõË°åÈôêÂà∂Âπ∂ËÆæÁΩÆÁîµÊú∫ÂèÇËÄÉÂÄº
 124:application/chassis/chassis.c ****  *
 125:application/chassis/chassis.c ****  */
 126:application/chassis/chassis.c **** static void LimitChassisOutput()
 127:application/chassis/chassis.c **** {
  97              		.loc 1 127 1 is_stmt 1 view -0
  98              		.cfi_startproc
  99              		@ args = 0, pretend = 0, frame = 0
 100              		@ frame_needed = 0, uses_anonymous_args = 0
 101 0000 08B5     		push	{r3, lr}
 102              		.cfi_def_cfa_offset 8
 103              		.cfi_offset 3, -8
 104              		.cfi_offset 14, -4
ARM GAS  C:\Users\Sive\AppData\Local\Temp\ccRSDs8v.s 			page 5


 128:application/chassis/chassis.c ****     // ÂäüÁéáÈôêÂà∂ÂæÖÊ∑ªÂä†
 129:application/chassis/chassis.c ****     // referee_data->PowerHeatData.chassis_power;
 130:application/chassis/chassis.c ****     // referee_data->PowerHeatData.chassis_power_buffer;
 131:application/chassis/chassis.c **** 
 132:application/chassis/chassis.c ****     // ÂÆåÊàêÂäüÁéáÈôêÂà∂ÂêéËøõË°åÁîµÊú∫ÂèÇËÄÉËæìÂÖ•ËÆæÂÆö
 133:application/chassis/chassis.c ****     DJIMotorSetRef(motor_lf, vt_lf);
 105              		.loc 1 133 5 view .LVU21
 106 0002 0E4B     		ldr	r3, .L6
 107 0004 93ED000A 		vldr.32	s0, [r3]
 108 0008 0D4B     		ldr	r3, .L6+4
 109 000a 1868     		ldr	r0, [r3]
 110 000c FFF7FEFF 		bl	DJIMotorSetRef
 111              	.LVL0:
 134:application/chassis/chassis.c ****     DJIMotorSetRef(motor_rf, vt_rf);
 112              		.loc 1 134 5 view .LVU22
 113 0010 0C4B     		ldr	r3, .L6+8
 114 0012 93ED000A 		vldr.32	s0, [r3]
 115 0016 0C4B     		ldr	r3, .L6+12
 116 0018 1868     		ldr	r0, [r3]
 117 001a FFF7FEFF 		bl	DJIMotorSetRef
 118              	.LVL1:
 135:application/chassis/chassis.c ****     DJIMotorSetRef(motor_lb, vt_lb);
 119              		.loc 1 135 5 view .LVU23
 120 001e 0B4B     		ldr	r3, .L6+16
 121 0020 93ED000A 		vldr.32	s0, [r3]
 122 0024 0A4B     		ldr	r3, .L6+20
 123 0026 1868     		ldr	r0, [r3]
 124 0028 FFF7FEFF 		bl	DJIMotorSetRef
 125              	.LVL2:
 136:application/chassis/chassis.c ****     DJIMotorSetRef(motor_rb, vt_rb);
 126              		.loc 1 136 5 view .LVU24
 127 002c 094B     		ldr	r3, .L6+24
 128 002e 93ED000A 		vldr.32	s0, [r3]
 129 0032 094B     		ldr	r3, .L6+28
 130 0034 1868     		ldr	r0, [r3]
 131 0036 FFF7FEFF 		bl	DJIMotorSetRef
 132              	.LVL3:
 137:application/chassis/chassis.c **** }
 133              		.loc 1 137 1 is_stmt 0 view .LVU25
 134 003a 08BD     		pop	{r3, pc}
 135              	.L7:
 136              		.align	2
 137              	.L6:
 138 003c 00000000 		.word	vt_lf
 139 0040 00000000 		.word	motor_lf
 140 0044 00000000 		.word	vt_rf
 141 0048 00000000 		.word	motor_rf
 142 004c 00000000 		.word	vt_lb
 143 0050 00000000 		.word	motor_lb
 144 0054 00000000 		.word	vt_rb
 145 0058 00000000 		.word	motor_rb
 146              		.cfi_endproc
 147              	.LFE169:
 149              		.section	.rodata.ChassisInit.str1.4,"aMS",%progbits,1
 150              		.align	2
 151              	.LC0:
 152 0000 63686173 		.ascii	"chassis_cmd\000"
ARM GAS  C:\Users\Sive\AppData\Local\Temp\ccRSDs8v.s 			page 6


 152      7369735F 
 152      636D6400 
 153              		.align	2
 154              	.LC1:
 155 000c 63686173 		.ascii	"chassis_feed\000"
 155      7369735F 
 155      66656564 
 155      00
 156              		.section	.text.ChassisInit,"ax",%progbits
 157              		.align	1
 158              		.global	ChassisInit
 159              		.syntax unified
 160              		.thumb
 161              		.thumb_func
 163              	ChassisInit:
 164              	.LFB167:
  30:application/chassis/chassis.c ****         chassis_angle_pid.Kp=0.1;
 165              		.loc 1 30 1 is_stmt 1 view -0
 166              		.cfi_startproc
 167              		@ args = 0, pretend = 0, frame = 176
 168              		@ frame_needed = 0, uses_anonymous_args = 0
 169 0000 70B5     		push	{r4, r5, r6, lr}
 170              		.cfi_def_cfa_offset 16
 171              		.cfi_offset 4, -16
 172              		.cfi_offset 5, -12
 173              		.cfi_offset 6, -8
 174              		.cfi_offset 14, -4
 175 0002 ACB0     		sub	sp, sp, #176
 176              		.cfi_def_cfa_offset 192
  31:application/chassis/chassis.c ****         chassis_angle_pid.Ki=0.01;   
 177              		.loc 1 31 9 view .LVU27
  31:application/chassis/chassis.c ****         chassis_angle_pid.Ki=0.01;   
 178              		.loc 1 31 29 is_stmt 0 view .LVU28
 179 0004 2B4B     		ldr	r3, .L10
 180 0006 2C4A     		ldr	r2, .L10+4
 181 0008 1A60     		str	r2, [r3]	@ float
  32:application/chassis/chassis.c ****         chassis_angle_pid.Kd=0.05;
 182              		.loc 1 32 9 is_stmt 1 view .LVU29
  32:application/chassis/chassis.c ****         chassis_angle_pid.Kd=0.05;
 183              		.loc 1 32 29 is_stmt 0 view .LVU30
 184 000a 2C4A     		ldr	r2, .L10+8
 185 000c 5A60     		str	r2, [r3, #4]	@ float
  33:application/chassis/chassis.c ****         // static PIDInstance 
 186              		.loc 1 33 9 is_stmt 1 view .LVU31
  33:application/chassis/chassis.c ****         // static PIDInstance 
 187              		.loc 1 33 29 is_stmt 0 view .LVU32
 188 000e 2C4A     		ldr	r2, .L10+12
 189 0010 9A60     		str	r2, [r3, #8]	@ float
  36:application/chassis/chassis.c ****         .can_init_config.can_handle = &hcan1,
 190              		.loc 1 36 5 is_stmt 1 view .LVU33
  36:application/chassis/chassis.c ****         .can_init_config.can_handle = &hcan1,
 191              		.loc 1 36 25 is_stmt 0 view .LVU34
 192 0012 B022     		movs	r2, #176
 193 0014 0021     		movs	r1, #0
 194 0016 6846     		mov	r0, sp
 195 0018 FFF7FEFF 		bl	memset
 196              	.LVL4:
ARM GAS  C:\Users\Sive\AppData\Local\Temp\ccRSDs8v.s 			page 7


 197 001c 4FF07C53 		mov	r3, #1056964608
 198 0020 0493     		str	r3, [sp, #16]	@ float
 199 0022 284B     		ldr	r3, .L10+16
 200 0024 0793     		str	r3, [sp, #28]	@ float
 201 0026 0722     		movs	r2, #7
 202 0028 8DF82420 		strb	r2, [sp, #36]
 203 002c 264B     		ldr	r3, .L10+20
 204 002e 0A93     		str	r3, [sp, #40]	@ float
 205 0030 2649     		ldr	r1, .L10+24
 206 0032 0F91     		str	r1, [sp, #60]	@ float
 207 0034 2649     		ldr	r1, .L10+28
 208 0036 1291     		str	r1, [sp, #72]	@ float
 209 0038 8DF85020 		strb	r2, [sp, #80]
 210 003c 1593     		str	r3, [sp, #84]	@ float
 211 003e 0225     		movs	r5, #2
 212 0040 8DF89450 		strb	r5, [sp, #148]
 213 0044 0326     		movs	r6, #3
 214 0046 8DF89560 		strb	r6, [sp, #149]
 215 004a 8DF89B50 		strb	r5, [sp, #155]
 216 004e 214B     		ldr	r3, .L10+32
 217 0050 2793     		str	r3, [sp, #156]
  65:application/chassis/chassis.c ****     chassis_motor_config.controller_setting_init_config.motor_reverse_flag = MOTOR_DIRECTION_REVERS
 218              		.loc 1 65 5 is_stmt 1 view .LVU35
  65:application/chassis/chassis.c ****     chassis_motor_config.controller_setting_init_config.motor_reverse_flag = MOTOR_DIRECTION_REVERS
 219              		.loc 1 65 48 is_stmt 0 view .LVU36
 220 0052 0124     		movs	r4, #1
 221 0054 2894     		str	r4, [sp, #160]
  66:application/chassis/chassis.c ****     motor_lf = DJIMotorInit(&chassis_motor_config);
 222              		.loc 1 66 5 is_stmt 1 view .LVU37
  66:application/chassis/chassis.c ****     motor_lf = DJIMotorInit(&chassis_motor_config);
 223              		.loc 1 66 76 is_stmt 0 view .LVU38
 224 0056 8DF89640 		strb	r4, [sp, #150]
  67:application/chassis/chassis.c **** 
 225              		.loc 1 67 5 is_stmt 1 view .LVU39
  67:application/chassis/chassis.c **** 
 226              		.loc 1 67 16 is_stmt 0 view .LVU40
 227 005a 6846     		mov	r0, sp
 228 005c FFF7FEFF 		bl	DJIMotorInit
 229              	.LVL5:
  67:application/chassis/chassis.c **** 
 230              		.loc 1 67 14 discriminator 1 view .LVU41
 231 0060 1D4B     		ldr	r3, .L10+36
 232 0062 1860     		str	r0, [r3]
  69:application/chassis/chassis.c ****     chassis_motor_config.controller_setting_init_config.motor_reverse_flag = MOTOR_DIRECTION_REVERS
 233              		.loc 1 69 5 is_stmt 1 view .LVU42
  69:application/chassis/chassis.c ****     chassis_motor_config.controller_setting_init_config.motor_reverse_flag = MOTOR_DIRECTION_REVERS
 234              		.loc 1 69 48 is_stmt 0 view .LVU43
 235 0064 2895     		str	r5, [sp, #160]
  70:application/chassis/chassis.c ****     motor_rf = DJIMotorInit(&chassis_motor_config);
 236              		.loc 1 70 5 is_stmt 1 view .LVU44
  70:application/chassis/chassis.c ****     motor_rf = DJIMotorInit(&chassis_motor_config);
 237              		.loc 1 70 76 is_stmt 0 view .LVU45
 238 0066 8DF89640 		strb	r4, [sp, #150]
  71:application/chassis/chassis.c **** 
 239              		.loc 1 71 5 is_stmt 1 view .LVU46
  71:application/chassis/chassis.c **** 
 240              		.loc 1 71 16 is_stmt 0 view .LVU47
ARM GAS  C:\Users\Sive\AppData\Local\Temp\ccRSDs8v.s 			page 8


 241 006a 6846     		mov	r0, sp
 242 006c FFF7FEFF 		bl	DJIMotorInit
 243              	.LVL6:
  71:application/chassis/chassis.c **** 
 244              		.loc 1 71 14 discriminator 1 view .LVU48
 245 0070 1A4B     		ldr	r3, .L10+40
 246 0072 1860     		str	r0, [r3]
  73:application/chassis/chassis.c ****     chassis_motor_config.controller_setting_init_config.motor_reverse_flag = MOTOR_DIRECTION_REVERS
 247              		.loc 1 73 5 is_stmt 1 view .LVU49
  73:application/chassis/chassis.c ****     chassis_motor_config.controller_setting_init_config.motor_reverse_flag = MOTOR_DIRECTION_REVERS
 248              		.loc 1 73 48 is_stmt 0 view .LVU50
 249 0074 0423     		movs	r3, #4
 250 0076 2893     		str	r3, [sp, #160]
  74:application/chassis/chassis.c ****     motor_lb = DJIMotorInit(&chassis_motor_config);
 251              		.loc 1 74 5 is_stmt 1 view .LVU51
  74:application/chassis/chassis.c ****     motor_lb = DJIMotorInit(&chassis_motor_config);
 252              		.loc 1 74 76 is_stmt 0 view .LVU52
 253 0078 8DF89640 		strb	r4, [sp, #150]
  75:application/chassis/chassis.c **** 
 254              		.loc 1 75 5 is_stmt 1 view .LVU53
  75:application/chassis/chassis.c **** 
 255              		.loc 1 75 16 is_stmt 0 view .LVU54
 256 007c 6846     		mov	r0, sp
 257 007e FFF7FEFF 		bl	DJIMotorInit
 258              	.LVL7:
  75:application/chassis/chassis.c **** 
 259              		.loc 1 75 14 discriminator 1 view .LVU55
 260 0082 174B     		ldr	r3, .L10+44
 261 0084 1860     		str	r0, [r3]
  77:application/chassis/chassis.c ****     chassis_motor_config.controller_setting_init_config.motor_reverse_flag = MOTOR_DIRECTION_REVERS
 262              		.loc 1 77 5 is_stmt 1 view .LVU56
  77:application/chassis/chassis.c ****     chassis_motor_config.controller_setting_init_config.motor_reverse_flag = MOTOR_DIRECTION_REVERS
 263              		.loc 1 77 48 is_stmt 0 view .LVU57
 264 0086 2896     		str	r6, [sp, #160]
  78:application/chassis/chassis.c ****     motor_rb = DJIMotorInit(&chassis_motor_config);
 265              		.loc 1 78 5 is_stmt 1 view .LVU58
  78:application/chassis/chassis.c ****     motor_rb = DJIMotorInit(&chassis_motor_config);
 266              		.loc 1 78 76 is_stmt 0 view .LVU59
 267 0088 8DF89640 		strb	r4, [sp, #150]
  79:application/chassis/chassis.c **** 
 268              		.loc 1 79 5 is_stmt 1 view .LVU60
  79:application/chassis/chassis.c **** 
 269              		.loc 1 79 16 is_stmt 0 view .LVU61
 270 008c 6846     		mov	r0, sp
 271 008e FFF7FEFF 		bl	DJIMotorInit
 272              	.LVL8:
  79:application/chassis/chassis.c **** 
 273              		.loc 1 79 14 discriminator 1 view .LVU62
 274 0092 144B     		ldr	r3, .L10+48
 275 0094 1860     		str	r0, [r3]
  98:application/chassis/chassis.c ****     chassis_pub = PubRegister("chassis_feed", sizeof(Chassis_Upload_Data_s));
 276              		.loc 1 98 5 is_stmt 1 view .LVU63
  98:application/chassis/chassis.c ****     chassis_pub = PubRegister("chassis_feed", sizeof(Chassis_Upload_Data_s));
 277              		.loc 1 98 19 is_stmt 0 view .LVU64
 278 0096 1921     		movs	r1, #25
 279 0098 1348     		ldr	r0, .L10+52
 280 009a FFF7FEFF 		bl	SubRegister
ARM GAS  C:\Users\Sive\AppData\Local\Temp\ccRSDs8v.s 			page 9


 281              	.LVL9:
  98:application/chassis/chassis.c ****     chassis_pub = PubRegister("chassis_feed", sizeof(Chassis_Upload_Data_s));
 282              		.loc 1 98 17 discriminator 1 view .LVU65
 283 009e 134B     		ldr	r3, .L10+56
 284 00a0 1860     		str	r0, [r3]
  99:application/chassis/chassis.c **** #endif // ONE_BOARD
 285              		.loc 1 99 5 is_stmt 1 view .LVU66
  99:application/chassis/chassis.c **** #endif // ONE_BOARD
 286              		.loc 1 99 19 is_stmt 0 view .LVU67
 287 00a2 2146     		mov	r1, r4
 288 00a4 1248     		ldr	r0, .L10+60
 289 00a6 FFF7FEFF 		bl	PubRegister
 290              	.LVL10:
  99:application/chassis/chassis.c **** #endif // ONE_BOARD
 291              		.loc 1 99 17 discriminator 1 view .LVU68
 292 00aa 124B     		ldr	r3, .L10+64
 293 00ac 1860     		str	r0, [r3]
 101:application/chassis/chassis.c **** #define LF_CENTER ((HALF_TRACK_WIDTH + CENTER_GIMBAL_OFFSET_X + HALF_WHEEL_BASE - CENTER_GIMBAL_OFF
 294              		.loc 1 101 1 view .LVU69
 295 00ae 2CB0     		add	sp, sp, #176
 296              		.cfi_def_cfa_offset 16
 297              		@ sp needed
 298 00b0 70BD     		pop	{r4, r5, r6, pc}
 299              	.L11:
 300 00b2 00BF     		.align	2
 301              	.L10:
 302 00b4 00000000 		.word	chassis_angle_pid
 303 00b8 CDCCCC3D 		.word	1036831949
 304 00bc 0AD7233C 		.word	1008981770
 305 00c0 CDCC4C3D 		.word	1028443341
 306 00c4 00606A46 		.word	1181376512
 307 00c8 00803B45 		.word	1161527296
 308 00cc 00002041 		.word	1092616192
 309 00d0 00803B46 		.word	1178304512
 310 00d4 00000000 		.word	hcan1
 311 00d8 00000000 		.word	motor_lf
 312 00dc 00000000 		.word	motor_rf
 313 00e0 00000000 		.word	motor_lb
 314 00e4 00000000 		.word	motor_rb
 315 00e8 00000000 		.word	.LC0
 316 00ec 00000000 		.word	chassis_sub
 317 00f0 0C000000 		.word	.LC1
 318 00f4 00000000 		.word	chassis_pub
 319              		.cfi_endproc
 320              	.LFE167:
 322              		.section	.text.ChassisTask,"ax",%progbits
 323              		.align	1
 324              		.global	ChassisTask
 325              		.syntax unified
 326              		.thumb
 327              		.thumb_func
 329              	ChassisTask:
 330              	.LFB172:
 138:application/chassis/chassis.c **** 
 139:application/chassis/chassis.c **** 
 140:application/chassis/chassis.c **** /**
 141:application/chassis/chassis.c ****  * @brief ÂØπÊéßÂà∂ÁöÑÂ∫ïÁõòËßíÂ∫¶ËøõË°åÁªìÁÆó
ARM GAS  C:\Users\Sive\AppData\Local\Temp\ccRSDs8v.s 			page 10


 142:application/chassis/chassis.c ****  *          
 143:application/chassis/chassis.c ****  *
 144:application/chassis/chassis.c ****  */
 145:application/chassis/chassis.c **** 
 146:application/chassis/chassis.c **** static void EstimateChassisAngle(PIDInstance *chassis_angle_pid,float angle_measure,float angle_ref
 147:application/chassis/chassis.c ****         chassis_cmd_recv.wz=PIDCalculate(&chassis_angle_pid, angle_measure, angle_ref);
 148:application/chassis/chassis.c **** }
 149:application/chassis/chassis.c **** 
 150:application/chassis/chassis.c **** /**
 151:application/chassis/chassis.c ****  * @brief Ê†πÊçÆÊØè‰∏™ËΩÆÂ≠êÁöÑÈÄüÂ∫¶ÂèçÈ¶à,ËÆ°ÁÆóÂ∫ïÁõòÁöÑÂÆûÈôÖËøêÂä®ÈÄüÂ∫¶,ÈÄÜËøêÂä®Ëß£ÁÆó
 152:application/chassis/chassis.c ****  *        ÂØπ‰∫éÂèåÊùøÁöÑÊÉÖÂÜµ,ËÄÉËôëÂ¢ûÂä†Êù•Ëá™Â∫ïÁõòÊùøIMUÁöÑÊï∞ÊçÆ
 153:application/chassis/chassis.c ****  *
 154:application/chassis/chassis.c ****  */
 155:application/chassis/chassis.c **** static void EstimateSpeed()
 156:application/chassis/chassis.c ****     // Ê†πÊçÆÁîµÊú∫ÈÄüÂ∫¶ÂíåÈôÄËû∫‰ª™ÁöÑËßíÈÄüÂ∫¶ËøõË°åËß£ÁÆó,ËøòÂèØ‰ª•Âà©Áî®Âä†ÈÄüÂ∫¶ËÆ°Âà§Êñ≠ÊòØÂ
 157:application/chassis/chassis.c **** {
 158:application/chassis/chassis.c ****     // chassis_feedback_data.vx vy wz =
 159:application/chassis/chassis.c ****     //  ...
 160:application/chassis/chassis.c **** }
 161:application/chassis/chassis.c **** 
 162:application/chassis/chassis.c **** /* Êú∫Âô®‰∫∫Â∫ïÁõòÊéßÂà∂Ê†∏ÂøÉ‰ªªÂä° */
 163:application/chassis/chassis.c **** void ChassisTask()
 164:application/chassis/chassis.c **** {
 331              		.loc 1 164 1 is_stmt 1 view -0
 332              		.cfi_startproc
 333              		@ args = 0, pretend = 0, frame = 0
 334              		@ frame_needed = 0, uses_anonymous_args = 0
 335 0000 10B5     		push	{r4, lr}
 336              		.cfi_def_cfa_offset 8
 337              		.cfi_offset 4, -8
 338              		.cfi_offset 14, -4
 165:application/chassis/chassis.c ****     // ÂêéÁª≠Â¢ûÂä†Ê≤°Êî∂Âà∞Ê∂àÊÅØÁöÑÂ§ÑÁêÜ(ÂèåÊùøÁöÑÊÉÖÂÜµ)
 166:application/chassis/chassis.c ****     // Ëé∑ÂèñÊñ∞ÁöÑÊéßÂà∂‰ø°ÊÅØ
 167:application/chassis/chassis.c **** #ifdef ONE_BOARD
 168:application/chassis/chassis.c ****     SubGetMessage(chassis_sub, &chassis_cmd_recv);
 339              		.loc 1 168 5 view .LVU71
 340 0002 224C     		ldr	r4, .L16
 341 0004 2146     		mov	r1, r4
 342 0006 224B     		ldr	r3, .L16+4
 343 0008 1868     		ldr	r0, [r3]
 344 000a FFF7FEFF 		bl	SubGetMessage
 345              	.LVL11:
 169:application/chassis/chassis.c **** #endif   
 170:application/chassis/chassis.c **** #ifdef CHASSIS_BOARD
 171:application/chassis/chassis.c ****     chassis_cmd_recv = *(Chassis_Ctrl_Cmd_s *)CANCommGet(chasiss_can_comm);
 172:application/chassis/chassis.c **** #endif // CHASSIS_BOARD
 173:application/chassis/chassis.c **** 
 174:application/chassis/chassis.c ****     if (chassis_cmd_recv.chassis_mode == CHASSIS_ZERO_FORCE)
 346              		.loc 1 174 5 view .LVU72
 347              		.loc 1 174 25 is_stmt 0 view .LVU73
 348 000e 237D     		ldrb	r3, [r4, #20]	@ zero_extendqisi2
 349              		.loc 1 174 8 view .LVU74
 350 0010 53BB     		cbnz	r3, .L13
 175:application/chassis/chassis.c ****     { // Â¶ÇÊûúÂá∫Áé∞ÈáçË¶ÅÊ®°ÂùóÁ¶ªÁ∫øÊàñÈÅ•ÊéßÂô®ËÆæÁΩÆ‰∏∫ÊÄ•ÂÅú,ËÆ©ÁîµÊú∫ÂÅúÊ≠¢
 176:application/chassis/chassis.c ****         DJIMotorStop(motor_lf);
 351              		.loc 1 176 9 is_stmt 1 view .LVU75
 352 0012 204B     		ldr	r3, .L16+8
ARM GAS  C:\Users\Sive\AppData\Local\Temp\ccRSDs8v.s 			page 11


 353 0014 1868     		ldr	r0, [r3]
 354 0016 FFF7FEFF 		bl	DJIMotorStop
 355              	.LVL12:
 177:application/chassis/chassis.c ****         DJIMotorStop(motor_rf);
 356              		.loc 1 177 9 view .LVU76
 357 001a 1F4B     		ldr	r3, .L16+12
 358 001c 1868     		ldr	r0, [r3]
 359 001e FFF7FEFF 		bl	DJIMotorStop
 360              	.LVL13:
 178:application/chassis/chassis.c ****         DJIMotorStop(motor_lb);
 361              		.loc 1 178 9 view .LVU77
 362 0022 1E4B     		ldr	r3, .L16+16
 363 0024 1868     		ldr	r0, [r3]
 364 0026 FFF7FEFF 		bl	DJIMotorStop
 365              	.LVL14:
 179:application/chassis/chassis.c ****         DJIMotorStop(motor_rb);
 366              		.loc 1 179 9 view .LVU78
 367 002a 1D4B     		ldr	r3, .L16+20
 368 002c 1868     		ldr	r0, [r3]
 369 002e FFF7FEFF 		bl	DJIMotorStop
 370              	.LVL15:
 371              	.L14:
 180:application/chassis/chassis.c ****     }
 181:application/chassis/chassis.c ****     else
 182:application/chassis/chassis.c ****     { // Ê≠£Â∏∏Â∑•‰Ωú
 183:application/chassis/chassis.c ****         DJIMotorEnable(motor_lf);
 184:application/chassis/chassis.c ****         DJIMotorEnable(motor_rf);
 185:application/chassis/chassis.c ****         DJIMotorEnable(motor_lb);
 186:application/chassis/chassis.c ****         DJIMotorEnable(motor_rb);
 187:application/chassis/chassis.c ****     }
 188:application/chassis/chassis.c **** 
 189:application/chassis/chassis.c ****     // Ê†πÊçÆÊéßÂà∂Ê®°ÂºèËÆæÂÆöÊóãËΩ¨ÈÄüÂ∫¶
 190:application/chassis/chassis.c ****     // switch (chassis_cmd_recv.chassis_mode)
 191:application/chassis/chassis.c ****     // {
 192:application/chassis/chassis.c ****     // case CHASSIS_NO_FOLLOW: // Â∫ïÁõò‰∏çÊóãËΩ¨,‰ΩÜÁª¥ÊåÅÂÖ®ÂêëÊú∫Âä®,‰∏ÄËà¨Áî®‰∫éË∞ÉÊï¥‰∫ëÂè∞Âßø
 193:application/chassis/chassis.c ****     //     chassis_cmd_recv.wz = 0;
 194:application/chassis/chassis.c ****     //     break;
 195:application/chassis/chassis.c ****     // case CHASSIS_FOLLOW_GIMBAL_YAW: // Ë∑üÈöè‰∫ëÂè∞,‰∏çÂçïÁã¨ËÆæÁΩÆpid,‰ª•ËØØÂ∑ÆËßíÂ∫¶Âπ≥Êñπ‰∏∫È
 196:application/chassis/chassis.c ****     //     chassis_cmd_recv.wz = -1.5f * chassis_cmd_recv.offset_angle * abs(chassis_cmd_recv.offse
 197:application/chassis/chassis.c ****     //     break;
 198:application/chassis/chassis.c ****     // case CHASSIS_ROTATE: // Ëá™Êóã,ÂêåÊó∂‰øùÊåÅÂÖ®ÂêëÊú∫Âä®;ÂΩìÂâçwzÁª¥ÊåÅÂÆöÂÄº,ÂêéÁª≠Â¢ûÂä†‰∏ç
 199:application/chassis/chassis.c ****     //     chassis_cmd_recv.wz = 4000;
 200:application/chassis/chassis.c ****     //     break;
 201:application/chassis/chassis.c ****     // default:
 202:application/chassis/chassis.c ****     //     break;
 203:application/chassis/chassis.c ****     // }
 204:application/chassis/chassis.c ****     // if((90-abs(INS.Yaw))>30){----Â∫ïÁõòËΩ¨90¬∞
 205:application/chassis/chassis.c **** 
 206:application/chassis/chassis.c ****     // }else
 207:application/chassis/chassis.c ****     // {intergal=intergal+(90-abs(INS.Yaw));}
 208:application/chassis/chassis.c ****     // chassis_cmd_recv.wz=(90-abs(INS.Yaw))*10+intergal*0.05;
 209:application/chassis/chassis.c ****     chassis_cmd_recv.wz=PIDCalculate(&chassis_angle_pid, INS.Yaw, chassis_cmd_recv.offset_angle);
 372              		.loc 1 209 5 view .LVU79
 373              		.loc 1 209 25 is_stmt 0 view .LVU80
 374 0032 164C     		ldr	r4, .L16
 375 0034 D4ED030A 		vldr.32	s1, [r4, #12]
 376 0038 1A4B     		ldr	r3, .L16+24
ARM GAS  C:\Users\Sive\AppData\Local\Temp\ccRSDs8v.s 			page 12


 377 003a 93ED1C0A 		vldr.32	s0, [r3, #112]
 378 003e 1A48     		ldr	r0, .L16+28
 379 0040 FFF7FEFF 		bl	PIDCalculate
 380              	.LVL16:
 381              		.loc 1 209 24 discriminator 1 view .LVU81
 382 0044 84ED020A 		vstr.32	s0, [r4, #8]
 210:application/chassis/chassis.c ****     // EstimateChassisAngle(&chassis_angle_pid,INS.Yaw,chassis_cmd_recv.offset_angle);
 211:application/chassis/chassis.c ****     chassis_vx=chassis_cmd_recv.vx;
 383              		.loc 1 211 5 is_stmt 1 view .LVU82
 384              		.loc 1 211 32 is_stmt 0 view .LVU83
 385 0048 2268     		ldr	r2, [r4]	@ float
 386              		.loc 1 211 15 view .LVU84
 387 004a 184B     		ldr	r3, .L16+32
 388 004c 1A60     		str	r2, [r3]	@ float
 212:application/chassis/chassis.c ****     chassis_vy=chassis_cmd_recv.vy;
 389              		.loc 1 212 5 is_stmt 1 view .LVU85
 390              		.loc 1 212 32 is_stmt 0 view .LVU86
 391 004e 6268     		ldr	r2, [r4, #4]	@ float
 392              		.loc 1 212 15 view .LVU87
 393 0050 174B     		ldr	r3, .L16+36
 394 0052 1A60     		str	r2, [r3]	@ float
 213:application/chassis/chassis.c ****     // chassis_wz=chassis_cmd_recv.wz;
 214:application/chassis/chassis.c ****     // Ê†πÊçÆ‰∫ëÂè∞ÂíåÂ∫ïÁõòÁöÑËßíÂ∫¶offsetÂ∞ÜÊéßÂà∂ÈáèÊò†Â∞ÑÂà∞Â∫ïÁõòÂùêÊ†áÁ≥ª‰∏ä
 215:application/chassis/chassis.c ****     // Â∫ïÁõòÈÄÜÊó∂ÈíàÊóãËΩ¨‰∏∫ËßíÂ∫¶Ê≠£ÊñπÂêë;‰∫ëÂè∞ÂëΩ‰ª§ÁöÑÊñπÂêë‰ª•‰∫ëÂè∞ÊåáÂêëÁöÑÊñπÂêë‰∏∫x,Èá
 216:application/chassis/chassis.c ****     // static float sin_theta, cos_theta;
 217:application/chassis/chassis.c ****     // cos_theta = arm_cos_f32(chassis_cmd_recv.offset_angle * DEGREE_2_RAD);
 218:application/chassis/chassis.c ****     // sin_theta = arm_sin_f32(chassis_cmd_recv.offset_angle * DEGREE_2_RAD);
 219:application/chassis/chassis.c ****     // chassis_vx = chassis_cmd_recv.vx * cos_theta - chassis_cmd_recv.vy * sin_theta;
 220:application/chassis/chassis.c ****     // chassis_vy = chassis_cmd_recv.vx * sin_theta + chassis_cmd_recv.vy * cos_theta;
 221:application/chassis/chassis.c ****     
 222:application/chassis/chassis.c **** 
 223:application/chassis/chassis.c ****     // Ê†πÊçÆÊéßÂà∂Ê®°ÂºèËøõË°åÊ≠£ËøêÂä®Â≠¶Ëß£ÁÆó,ËÆ°ÁÆóÂ∫ïÁõòËæìÂá∫
 224:application/chassis/chassis.c ****     MecanumCalculate();
 395              		.loc 1 224 5 is_stmt 1 view .LVU88
 396 0054 FFF7FEFF 		bl	MecanumCalculate
 397              	.LVL17:
 225:application/chassis/chassis.c **** 
 226:application/chassis/chassis.c ****     // Ê†πÊçÆË£ÅÂà§Á≥ªÁªüÁöÑÂèçÈ¶àÊï∞ÊçÆÂíåÁîµÂÆπÊï∞ÊçÆÂØπËæìÂá∫ÈôêÂπÖÂπ∂ËÆæÂÆöÈó≠ÁéØÂèÇËÄÉÂÄº
 227:application/chassis/chassis.c ****     LimitChassisOutput();
 398              		.loc 1 227 5 view .LVU89
 399 0058 FFF7FEFF 		bl	LimitChassisOutput
 400              	.LVL18:
 228:application/chassis/chassis.c **** 
 229:application/chassis/chassis.c ****     // Ê†πÊçÆÁîµÊú∫ÁöÑÂèçÈ¶àÈÄüÂ∫¶ÂíåIMU(Â¶ÇÊûúÊúâ)ËÆ°ÁÆóÁúüÂÆûÈÄüÂ∫¶
 230:application/chassis/chassis.c ****     EstimateSpeed();
 401              		.loc 1 230 5 view .LVU90
 231:application/chassis/chassis.c **** 
 232:application/chassis/chassis.c ****     // // Ëé∑ÂèñË£ÅÂà§Á≥ªÁªüÊï∞ÊçÆ   Âª∫ËÆÆÂ∞ÜË£ÅÂà§Á≥ªÁªü‰∏éÂ∫ïÁõòÂàÜÁ¶ªÔºåÊâÄ‰ª•Ê≠§Â§ÑÊï∞ÊçÆÂ∫î‰Ω
 233:application/chassis/chassis.c ****     // // ÊàëÊñπÈ¢úËâ≤idÂ∞è‰∫é7ÊòØÁ∫¢Ëâ≤,Â§ß‰∫é7ÊòØËìùËâ≤,Ê≥®ÊÑèËøôÈáåÂèëÈÄÅÁöÑÊòØÂØπÊñπÁöÑÈ¢úËâ≤, 
 234:application/chassis/chassis.c ****     // chassis_feedback_data.enemy_color = referee_data->GameRobotState.robot_id > 7 ? 1 : 0;
 235:application/chassis/chassis.c ****     // // ÂΩìÂâçÂè™ÂÅö‰∫Ü17mmÁÉ≠ÈáèÁöÑÊï∞ÊçÆËé∑Âèñ,ÂêéÁª≠Ê†πÊçÆrobot_def‰∏≠ÁöÑÂÆèÂàáÊç¢ÂèåÊû™ÁÆ°Âíå
 236:application/chassis/chassis.c ****     // chassis_feedback_data.bullet_speed = referee_data->GameRobotState.shooter_id1_17mm_speed_lim
 237:application/chassis/chassis.c ****     // chassis_feedback_data.rest_heat = referee_data->PowerHeatData.shooter_heat0;
 238:application/chassis/chassis.c **** 
 239:application/chassis/chassis.c ****     // Êé®ÈÄÅÂèçÈ¶àÊ∂àÊÅØ
 240:application/chassis/chassis.c **** #ifdef ONE_BOARD
 241:application/chassis/chassis.c ****     PubPushMessage(chassis_pub, (void *)&chassis_feedback_data);
ARM GAS  C:\Users\Sive\AppData\Local\Temp\ccRSDs8v.s 			page 13


 402              		.loc 1 241 5 view .LVU91
 403 005c 1549     		ldr	r1, .L16+40
 404 005e 164B     		ldr	r3, .L16+44
 405 0060 1868     		ldr	r0, [r3]
 406 0062 FFF7FEFF 		bl	PubPushMessage
 407              	.LVL19:
 242:application/chassis/chassis.c **** #endif
 243:application/chassis/chassis.c **** #ifdef CHASSIS_BOARD
 244:application/chassis/chassis.c ****     CANCommSend(chasiss_can_comm, (void *)&chassis_feedback_data);
 245:application/chassis/chassis.c **** #endif // CHASSIS_BOARD
 246:application/chassis/chassis.c **** }...
 408              		.loc 1 246 1 is_stmt 0 view .LVU92
 409 0066 10BD     		pop	{r4, pc}
 410              	.L13:
 183:application/chassis/chassis.c ****         DJIMotorEnable(motor_lf);
 411              		.loc 1 183 9 is_stmt 1 view .LVU93
 412 0068 0A4B     		ldr	r3, .L16+8
 413 006a 1868     		ldr	r0, [r3]
 414 006c FFF7FEFF 		bl	DJIMotorEnable
 415              	.LVL20:
 184:application/chassis/chassis.c ****         DJIMotorEnable(motor_rf);
 416              		.loc 1 184 9 view .LVU94
 417 0070 094B     		ldr	r3, .L16+12
 418 0072 1868     		ldr	r0, [r3]
 419 0074 FFF7FEFF 		bl	DJIMotorEnable
 420              	.LVL21:
 185:application/chassis/chassis.c ****         DJIMotorEnable(motor_lb);
 421              		.loc 1 185 9 view .LVU95
 422 0078 084B     		ldr	r3, .L16+16
 423 007a 1868     		ldr	r0, [r3]
 424 007c FFF7FEFF 		bl	DJIMotorEnable
 425              	.LVL22:
 186:application/chassis/chassis.c ****         DJIMotorEnable(motor_rb);
 426              		.loc 1 186 9 view .LVU96
 427 0080 074B     		ldr	r3, .L16+20
 428 0082 1868     		ldr	r0, [r3]
 429 0084 FFF7FEFF 		bl	DJIMotorEnable
 430              	.LVL23:
 431 0088 D3E7     		b	.L14
 432              	.L17:
 433 008a 00BF     		.align	2
 434              	.L16:
 435 008c 00000000 		.word	chassis_cmd_recv
 436 0090 00000000 		.word	chassis_sub
 437 0094 00000000 		.word	motor_lf
 438 0098 00000000 		.word	motor_rf
 439 009c 00000000 		.word	motor_lb
 440 00a0 00000000 		.word	motor_rb
 441 00a4 00000000 		.word	INS
 442 00a8 00000000 		.word	chassis_angle_pid
 443 00ac 00000000 		.word	chassis_vx
 444 00b0 00000000 		.word	chassis_vy
 445 00b4 00000000 		.word	chassis_feedback_data
 446 00b8 00000000 		.word	chassis_pub
 447              		.cfi_endproc
 448              	.LFE172:
 450              		.section	.bss.motor_rb,"aw",%nobits
ARM GAS  C:\Users\Sive\AppData\Local\Temp\ccRSDs8v.s 			page 14


 451              		.align	2
 454              	motor_rb:
 455 0000 00000000 		.space	4
 456              		.section	.bss.motor_lb,"aw",%nobits
 457              		.align	2
 460              	motor_lb:
 461 0000 00000000 		.space	4
 462              		.section	.bss.motor_rf,"aw",%nobits
 463              		.align	2
 466              	motor_rf:
 467 0000 00000000 		.space	4
 468              		.section	.bss.motor_lf,"aw",%nobits
 469              		.align	2
 472              	motor_lf:
 473 0000 00000000 		.space	4
 474              		.section	.bss.chassis_angle_pid,"aw",%nobits
 475              		.align	3
 478              	chassis_angle_pid:
 479 0000 00000000 		.space	120
 479      00000000 
 479      00000000 
 479      00000000 
 479      00000000 
 480              		.section	.bss.chassis_feedback_data,"aw",%nobits
 481              		.align	2
 484              	chassis_feedback_data:
 485 0000 00       		.space	1
 486              		.section	.bss.chassis_cmd_recv,"aw",%nobits
 487              		.align	2
 490              	chassis_cmd_recv:
 491 0000 00000000 		.space	25
 491      00000000 
 491      00000000 
 491      00000000 
 491      00000000 
 492              		.section	.bss.chassis_sub,"aw",%nobits
 493              		.align	2
 496              	chassis_sub:
 497 0000 00000000 		.space	4
 498              		.section	.bss.chassis_pub,"aw",%nobits
 499              		.align	2
 502              	chassis_pub:
 503 0000 00000000 		.space	4
 504              		.section	.bss.vt_rb,"aw",%nobits
 505              		.align	2
 508              	vt_rb:
 509 0000 00000000 		.space	4
 510              		.section	.bss.vt_lb,"aw",%nobits
 511              		.align	2
 514              	vt_lb:
 515 0000 00000000 		.space	4
 516              		.section	.bss.vt_rf,"aw",%nobits
 517              		.align	2
 520              	vt_rf:
 521 0000 00000000 		.space	4
 522              		.section	.bss.vt_lf,"aw",%nobits
 523              		.align	2
ARM GAS  C:\Users\Sive\AppData\Local\Temp\ccRSDs8v.s 			page 15


 526              	vt_lf:
 527 0000 00000000 		.space	4
 528              		.section	.bss.chassis_vy,"aw",%nobits
 529              		.align	2
 532              	chassis_vy:
 533 0000 00000000 		.space	4
 534              		.section	.bss.chassis_vx,"aw",%nobits
 535              		.align	2
 538              	chassis_vx:
 539 0000 00000000 		.space	4
 540              		.text
 541              	.Letext0:
 542              		.file 2 "C:/Users/Sive/AppData/Roaming/Code/User/globalStorage/bmd.stm32-for-vscode/@xpack-dev-too
 543              		.file 3 "C:/Users/Sive/AppData/Roaming/Code/User/globalStorage/bmd.stm32-for-vscode/@xpack-dev-too
 544              		.file 4 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/stm32f407xx.h"
 545              		.file 5 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/stm32f4xx.h"
 546              		.file 6 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_can.h"
 547              		.file 7 "moudels/imu/INS_task.h"
 548              		.file 8 "application/robot_def.h"
 549              		.file 9 "bsp/can/bsp_can.h"
 550              		.file 10 "moudels/algorithm/controller.h"
 551              		.file 11 "moudels/motor/motor_def.h"
 552              		.file 12 "moudels/daemon/daemon.h"
 553              		.file 13 "moudels/motor/DJImotor/dji_motor.h"
 554              		.file 14 "moudels/message_center/message_center.h"
 555              		.file 15 "Core/Inc/can.h"
 556              		.file 16 "<built-in>"
ARM GAS  C:\Users\Sive\AppData\Local\Temp\ccRSDs8v.s 			page 16


DEFINED SYMBOLS
                            *ABS*:00000000 chassis.c
C:\Users\Sive\AppData\Local\Temp\ccRSDs8v.s:21     .text.MecanumCalculate:00000000 $t
C:\Users\Sive\AppData\Local\Temp\ccRSDs8v.s:26     .text.MecanumCalculate:00000000 MecanumCalculate
C:\Users\Sive\AppData\Local\Temp\ccRSDs8v.s:79     .text.MecanumCalculate:00000050 $d
C:\Users\Sive\AppData\Local\Temp\ccRSDs8v.s:538    .bss.chassis_vx:00000000 chassis_vx
C:\Users\Sive\AppData\Local\Temp\ccRSDs8v.s:532    .bss.chassis_vy:00000000 chassis_vy
C:\Users\Sive\AppData\Local\Temp\ccRSDs8v.s:490    .bss.chassis_cmd_recv:00000000 chassis_cmd_recv
C:\Users\Sive\AppData\Local\Temp\ccRSDs8v.s:526    .bss.vt_lf:00000000 vt_lf
C:\Users\Sive\AppData\Local\Temp\ccRSDs8v.s:520    .bss.vt_rf:00000000 vt_rf
C:\Users\Sive\AppData\Local\Temp\ccRSDs8v.s:514    .bss.vt_lb:00000000 vt_lb
C:\Users\Sive\AppData\Local\Temp\ccRSDs8v.s:508    .bss.vt_rb:00000000 vt_rb
C:\Users\Sive\AppData\Local\Temp\ccRSDs8v.s:90     .text.LimitChassisOutput:00000000 $t
C:\Users\Sive\AppData\Local\Temp\ccRSDs8v.s:95     .text.LimitChassisOutput:00000000 LimitChassisOutput
C:\Users\Sive\AppData\Local\Temp\ccRSDs8v.s:138    .text.LimitChassisOutput:0000003c $d
C:\Users\Sive\AppData\Local\Temp\ccRSDs8v.s:472    .bss.motor_lf:00000000 motor_lf
C:\Users\Sive\AppData\Local\Temp\ccRSDs8v.s:466    .bss.motor_rf:00000000 motor_rf
C:\Users\Sive\AppData\Local\Temp\ccRSDs8v.s:460    .bss.motor_lb:00000000 motor_lb
C:\Users\Sive\AppData\Local\Temp\ccRSDs8v.s:454    .bss.motor_rb:00000000 motor_rb
C:\Users\Sive\AppData\Local\Temp\ccRSDs8v.s:150    .rodata.ChassisInit.str1.4:00000000 $d
C:\Users\Sive\AppData\Local\Temp\ccRSDs8v.s:157    .text.ChassisInit:00000000 $t
C:\Users\Sive\AppData\Local\Temp\ccRSDs8v.s:163    .text.ChassisInit:00000000 ChassisInit
C:\Users\Sive\AppData\Local\Temp\ccRSDs8v.s:302    .text.ChassisInit:000000b4 $d
C:\Users\Sive\AppData\Local\Temp\ccRSDs8v.s:478    .bss.chassis_angle_pid:00000000 chassis_angle_pid
C:\Users\Sive\AppData\Local\Temp\ccRSDs8v.s:496    .bss.chassis_sub:00000000 chassis_sub
C:\Users\Sive\AppData\Local\Temp\ccRSDs8v.s:502    .bss.chassis_pub:00000000 chassis_pub
C:\Users\Sive\AppData\Local\Temp\ccRSDs8v.s:323    .text.ChassisTask:00000000 $t
C:\Users\Sive\AppData\Local\Temp\ccRSDs8v.s:329    .text.ChassisTask:00000000 ChassisTask
C:\Users\Sive\AppData\Local\Temp\ccRSDs8v.s:435    .text.ChassisTask:0000008c $d
C:\Users\Sive\AppData\Local\Temp\ccRSDs8v.s:484    .bss.chassis_feedback_data:00000000 chassis_feedback_data
C:\Users\Sive\AppData\Local\Temp\ccRSDs8v.s:451    .bss.motor_rb:00000000 $d
C:\Users\Sive\AppData\Local\Temp\ccRSDs8v.s:457    .bss.motor_lb:00000000 $d
C:\Users\Sive\AppData\Local\Temp\ccRSDs8v.s:463    .bss.motor_rf:00000000 $d
C:\Users\Sive\AppData\Local\Temp\ccRSDs8v.s:469    .bss.motor_lf:00000000 $d
C:\Users\Sive\AppData\Local\Temp\ccRSDs8v.s:475    .bss.chassis_angle_pid:00000000 $d
C:\Users\Sive\AppData\Local\Temp\ccRSDs8v.s:481    .bss.chassis_feedback_data:00000000 $d
C:\Users\Sive\AppData\Local\Temp\ccRSDs8v.s:487    .bss.chassis_cmd_recv:00000000 $d
C:\Users\Sive\AppData\Local\Temp\ccRSDs8v.s:493    .bss.chassis_sub:00000000 $d
C:\Users\Sive\AppData\Local\Temp\ccRSDs8v.s:499    .bss.chassis_pub:00000000 $d
C:\Users\Sive\AppData\Local\Temp\ccRSDs8v.s:505    .bss.vt_rb:00000000 $d
C:\Users\Sive\AppData\Local\Temp\ccRSDs8v.s:511    .bss.vt_lb:00000000 $d
C:\Users\Sive\AppData\Local\Temp\ccRSDs8v.s:517    .bss.vt_rf:00000000 $d
C:\Users\Sive\AppData\Local\Temp\ccRSDs8v.s:523    .bss.vt_lf:00000000 $d
C:\Users\Sive\AppData\Local\Temp\ccRSDs8v.s:529    .bss.chassis_vy:00000000 $d
C:\Users\Sive\AppData\Local\Temp\ccRSDs8v.s:535    .bss.chassis_vx:00000000 $d

UNDEFINED SYMBOLS
DJIMotorSetRef
memset
DJIMotorInit
SubRegister
PubRegister
hcan1
SubGetMessage
DJIMotorStop
PIDCalculate
PubPushMessage
ARM GAS  C:\Users\Sive\AppData\Local\Temp\ccRSDs8v.s 			page 17


DJIMotorEnable
INS
